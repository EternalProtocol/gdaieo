import{b as ye,f as I,c as Ce}from"./index-mC0qJ3-K.js";import{r as m,j as x,W as T,X as U,Y as q,w as V,N as f,B as le,d as oe,b as N,E as Ge,k as be,R as fe,Z as Me,e as t,G as ae,t as M,g as L,U as $e,n as Pe,A as O,u as s,l as b,S,M as D,$ as G}from"./index-DECWOKd0.js";import{p as j}from"./parseEther-BaH48UNR.js";const Ne=()=>{const o=m(""),{data:r}=x("owner"),{write:i}=T("transferOwnership"),d=async a=>{a()&&await i([o.value])},p=[{type:"required",message:"请输入新管理员地址"},{type:"custom",validator:a=>q(a),message:"请输入正确的地址"}];return U("OwnershipTransferred",a=>{console.log(a),a[0].args.newOwner===o.value||a[0].args.newOwner===r.value?(f.success("管理员转让成功"),o.value=""):f.error("管理员转让失败")}),{setNewManagementAddress:d,managementAddress:r,managementRules:p,newManagementAddress:o}},Le=()=>{const o=m(""),{data:r}=x("gdaToken"),{write:i}=T("setGDAAddress"),d=async a=>{a()&&await i([o.value])},p=[{type:"required",message:"请输入GDA地址"},{type:"custom",validator:a=>q(a),message:"请输入正确的GDA地址"}];return U("GDAAddressUpdated",a=>{a[0].args.newGDA===o.value?(f.success("新GDA设置成功"),r.value=""):f.error("新GDA设置失败")}),{setNewGDAAddress:d,GDAAddress:r,GDARules:p,newGDAAddress:o}},qe=()=>{const o=m(""),{data:r}=x("usdt"),{write:i}=T("setUSDTAddress"),d=async a=>{a()&&await i([o.value])},p=[{type:"required",message:"请输入USDT地址"},{type:"custom",validator:a=>q(a),message:"请输入正确的USDT地址"}];return U("USDTAddressUpdated",a=>{a[0].args.newUSDT===o.value?(f.success("新USDT设置成功"),o.value=""):f.error("新USDT设置失败")}),{setNewUSDTAddress:d,USDTAddress:r,USDTRules:p,newUSDTAddress:o}},Be=o=>{const r=m(""),{data:i}=x("merchant"),{write:d}=T("updateBasicConfig"),p=async n=>{n()&&(console.log(o,r.value),await d([o,r.value]))},a=[{type:"required",message:"请输入新的商户地址"},{type:"custom",validator:n=>q(n),message:"请输入正确的商户地址"}];return U("AdminConfigUpdated",n=>{f.success("新商户地址设置成功")}),{setNewMerchantsAddress:p,MerchantsAddress:i,MerchantsRules:a,newMerchantsAddress:r}},Ee=()=>{const{data:o}=x("totalTokens"),{data:r}=x("sharePrice"),{data:i}=x("startTime"),{data:d}=x("endTime"),{data:p}=x("dailyLimit"),{data:a}=x("addressLimit"),n=m(0),g=m(0),u=m(0),c=m(0),A=m(0),R=m(0),{write:Y}=T("updatePresaleConfig"),$=async()=>{console.log([n.value,g.value,BigInt(Math.floor(new Date(u.value).getTime()/1e3)),BigInt(Math.floor(new Date(c.value).getTime()/1e3)),A.value,R.value]),await Y([j(String(n.value)),j(String(g.value)),BigInt(Math.floor(new Date(u.value).getTime()/1e3)),BigInt(Math.floor(new Date(c.value).getTime()/1e3)),A.value,R.value])};U("AdminConfigUpdated",y=>{console.log(y),f.success("新商户地址设置成功")});const h={totalTokens:[{type:"required",message:"总量不能为空"},{type:"min",value:1,message:"不能小于1"}],sharePrice:[{type:"required",message:"单份价格不能为空"},{type:"min",value:1,message:"不能小于1"}],dailyLimit:[{type:"required",message:"单份价格不能为空"},{type:"min",value:1,message:"不能小于1"}],addressLimit:[{type:"required",message:"单份价格不能为空"},{type:"min",value:1,message:"不能小于1"}],start:[{type:"required",message:"开始时间不能为空"},{type:"custom",validator:y=>Oe(y),message:"开始时间必须大于今天"}],end:[{type:"required",message:"结束时间不能为空"},{type:"custom",validator:y=>(console.log(u.value),je(u.value,y)),message:"结束时间必须大于开始时间"}]};return V(o,y=>{n.value=le(y||0)},{deep:!0,immediate:!0}),V(r,y=>{g.value=le(y||0)},{deep:!0,immediate:!0}),V(i,y=>{u.value=ge(new Date(ye(y)*1e3))},{deep:!0,immediate:!0}),V(d,y=>{c.value=ge(new Date(ye(y)*1e3))},{deep:!0,immediate:!0}),V(p,y=>{A.value=y},{deep:!0,immediate:!0}),V(a,y=>{R.value=y},{deep:!0,immediate:!0}),{setUpdatePresaleConfig:$,totalTokens:n,sharePrice:g,start:u,end:c,dailyLimit:A,addressLimit:R,rules:h}},Fe=()=>{const{data:o}=x("rewardMultiplier"),{data:r}=x("dailyReleaseRate"),{data:i}=x("releaseCycle"),d=m(0),p=m(0),a=m(0),{write:n}=T("updateRewardConfig"),g=async()=>{await n([d.value,p.value,a.value])};U("AdminConfigUpdated",()=>{f.success("设置修改成功")});const u={multiplier:[{type:"required",message:"总量不能为空"},{type:"min",value:1,message:"不能小于1"}],releaseRate:[{type:"required",message:"单份价格不能为空"},{type:"min",value:1,message:"不能小于1"}],cycle:[{type:"required",message:"单份价格不能为空"},{type:"min",value:1,message:"不能小于1"}]};return V(o,c=>{d.value=c},{deep:!0,immediate:!0}),V(r,c=>{p.value=c},{deep:!0,immediate:!0}),V(i,c=>{a.value=c},{deep:!0,immediate:!0}),{setUpdateRewardConfig:g,rewardRules:u,multiplier:d,releaseRate:p,cycle:a}},Ie=()=>{const o=m(""),{data:r}=x("gdaPool"),{write:i}=T("addToGDAPool"),d=async a=>{a()&&await i([j(String(o.value))])},p=[{type:"required",message:"总量不能为空"},{type:"min",value:1,message:"不能小于1"}];return U("RewardPoolUpdated",()=>{f.success("增加成功")}),{addGDA:d,gdaPool:r,GDAPoolRules:p,addGDAAmount:o}};function Oe(o){const r=new Date(o),i=new Date,d=new Date(i.getFullYear(),i.getMonth(),i.getDate()+1);return r.getTime()>d.getTime()}function je(o,r){return new Date(r).getTime()>new Date(o).getTime()}const ge=o=>{const r=g=>g.toString().padStart(2,"0"),i=o.getFullYear(),d=r(o.getMonth()+1),p=r(o.getDate()),a=r(o.getHours()),n=r(o.getMinutes());return`${i}-${d}-${p}T${a}:${n}`},Ye={class:"input-wrapper"},he=["type","placeholder"],We={key:0,class:"text-red-500 text-xs mt-1"},w=oe({__name:"ValidatedInput",props:{modelValue:{},type:{},placeholder:{},rules:{}},emits:["update:modelValue"],setup(o,{expose:r,emit:i}){const d=o,p=i,a=m(d.modelValue),n=m("");V(()=>d.modelValue,u=>{a.value=u}),V(a,u=>{p("update:modelValue",u)});function g(){n.value="";for(const u of d.rules??[]){const c=a.value;if(u.type==="required"&&(c===""||c===null||c===void 0))return n.value=u.message||"该字段是必填项",!1;if(u.type==="min"){const A=Number(c);if(isNaN(A)||A<u.value)return n.value=u.message||`不能小于 ${u.value}`,!1}if(u.type==="max"){const A=Number(c);if(isNaN(A)||A>u.value)return n.value=u.message||`不能大于 ${u.value}`,!1}if(u.type==="custom"&&!u.validator(String(c)))return n.value=u.message,!1}return!0}return r({validate:g}),(u,c)=>(L(),N("div",Ye,[Ge(t("input",{class:ae(["input-field w-full px-3 py-2 rounded-button text-sm border",{"border-red-500":n.value}]),type:u.type,placeholder:u.placeholder,"onUpdate:modelValue":c[0]||(c[0]=A=>a.value=A),onBlur:g,onInput:g},null,42,he),[[Me,a.value]]),n.value?(L(),N("p",We,M(n.value),1)):be("",!0),fe(u.$slots,"default",{validate:g})]))}}),ve=oe({__name:"ValidatedForm",emits:["success"],setup(o,{emit:r}){const i=m([]),d=r;function p(n){n&&typeof n.validate=="function"&&i.value.push(()=>Promise.resolve(n.validate()))}async function a(){let n=!0;for(const g of i.value)await g()||(n=!1);n&&d("success")}return(n,g)=>(L(),N("form",{onSubmit:$e(a,["prevent"])},[fe(n.$slots,"default",{register:p})],32))}}),ze={class:"py-4 px-4 relative flex-1 overflow-auto"},He={class:"space-y-6"},Xe={class:"glass-effect p-4 rounded-lg"},Ze={class:"space-y-4"},Je={class:"space-y-2 mb-2"},Ke={class:"space-y-2"},Qe=["onClick"],_e={class:"space-y-2 mb-2"},et={class:"space-y-2"},tt=["onClick"],st={class:"space-y-2 mb-2"},lt={class:"space-y-2"},at=["onClick"],ot={class:"space-y-2 mb-2"},rt={class:"space-y-2"},nt=["onClick"],ut={class:"glass-effect p-4 rounded-lg"},dt={class:"space-y-4"},it={key:0,class:"flex gap-2 mt-2"},mt=["onClick"],pt=["onClick"],ct={class:"text-sm text-gray-400 mb-2 flex justify-between items-center"},yt={class:"text-secondary"},gt={class:"space-y-2 mb-2"},vt=["onClick"],bt={class:"space-y-2"},ft=["onClick"],wt={class:"glass-effect p-4 rounded-lg"},xt={class:"grid grid-cols-2 gap-4"},Vt=oe({__name:"Back",setup(o){const r=k=>{Ce(k).then(()=>{f.success("复制成功")}).catch(e=>{f.error("复制失败")})},{setNewManagementAddress:i,managementAddress:d,newManagementAddress:p,managementRules:a}=Ne(),{setNewGDAAddress:n,GDAAddress:g,GDARules:u,newGDAAddress:c}=Le(),{setNewUSDTAddress:A,USDTAddress:R,USDTRules:Y,newUSDTAddress:$}=qe(),{setNewMerchantsAddress:h,MerchantsAddress:y,MerchantsRules:we,newMerchantsAddress:W}=Be(d.value),re=m(),ne=m(),ue=m(),de=m(),ie=m(),me=m(),{totalTokens:z,sharePrice:H,start:X,end:Z,dailyLimit:J,addressLimit:K,rules:C,setUpdatePresaleConfig:xe}=Ee(),{setUpdateRewardConfig:Ae,rewardRules:Q,multiplier:_,releaseRate:ee,cycle:te}=Fe(),{addGDA:De,gdaPool:B,GDAPoolRules:pe,addGDAAmount:se}=Ie(),P=m(),{write:ke}=T("withdrawGDAtoMerchant"),Ve=k=>{if(B.value==0){f.error("没有可提取的GDA");return}if(k()){if(P.value>B.value){f.error("最多只能提取"+B.value);return}if(P.value<1){f.error("提取数量必须大于1个!");return}ke([j(String(P.value))])}};U("GDAWithdrawnToMerchant",()=>{f.success("提取成功")});const Se=[{type:"custom",validator:k=>q(k),message:"请输入正确的用户地址"},{type:"custom",validator:k=>(F.value=!1,Ue([k]),!0)}],E=m(""),F=m(!1),{data:Te,setParams:Ue}=x("pausedRewards");V(Te,k=>{F.value=k});const{write:Re}=T("toggleRewardStatus"),ce=async(k,e)=>{k()&&await Re([E.value,e])};return U("RewardStatusToggled",()=>{f.success("修改成功")}),(k,e)=>(L(),N("main",ze,[e[52]||(e[52]=t("h1",{class:"text-2xl font-bold text-primary neon-text mb-4"},"系统设置",-1)),t("div",He,[t("div",Xe,[e[33]||(e[33]=t("h2",{class:"text-lg text-primary mb-4"},"基础配置",-1)),t("div",Ze,[t("div",null,[e[21]||(e[21]=t("label",{class:"block text-sm text-gray-400 mb-2"},"当前管理员",-1)),t("div",Je,[O(M(s(I)(s(d)))+" ",1),t("button",{class:"ml-2 text-gray-400 hover:text-primary",onClick:e[0]||(e[0]=l=>r(String(s(d))))},e[20]||(e[20]=[t("i",{class:"fas fa-copy"},null,-1)]))]),e[22]||(e[22]=t("label",{class:"block text-sm text-gray-400 mb-2"},"新管理员地址",-1)),t("div",Ke,[b(w,{modelValue:s(p),"onUpdate:modelValue":e[1]||(e[1]=l=>D(p)?p.value=l:null),rules:s(a),placeholder:"请输入新管理员地址"},{default:S(({validate:l})=>[t("button",{class:"w-full bg-primary text-dark py-2 my-2 rounded-button button-glow",onClick:v=>s(i)(l)}," 确认修改 ",8,Qe)]),_:1},8,["modelValue","rules"])])]),t("div",null,[e[24]||(e[24]=t("label",{class:"block text-sm text-gray-400 mb-2"},"当前GDA地址",-1)),t("div",_e,[O(M(s(I)(s(g)))+" ",1),t("button",{class:"ml-2 text-gray-400 hover:text-primary",onClick:e[2]||(e[2]=l=>r(String(s(g))))},e[23]||(e[23]=[t("i",{class:"fas fa-copy"},null,-1)]))]),e[25]||(e[25]=t("label",{class:"block text-sm text-gray-400 mb-2"},"新GDA地址",-1)),t("div",et,[b(w,{modelValue:s(c),"onUpdate:modelValue":e[3]||(e[3]=l=>D(c)?c.value=l:null),rules:s(u),placeholder:"请输入新GDA地址"},{default:S(({validate:l})=>[t("button",{class:"w-full bg-primary text-dark py-2 my-2 rounded-button button-glow",onClick:v=>s(n)(l)}," 确认修改 ",8,tt)]),_:1},8,["modelValue","rules"])])]),t("div",null,[e[27]||(e[27]=t("label",{class:"block text-sm text-gray-400 mb-2"},"当前USDT地址",-1)),t("div",st,[O(M(s(I)(s(R)))+" ",1),t("button",{class:"ml-2 text-gray-400 hover:text-primary",onClick:e[4]||(e[4]=l=>r(String(s(R))))},e[26]||(e[26]=[t("i",{class:"fas fa-copy"},null,-1)]))]),e[28]||(e[28]=t("label",{class:"block text-sm text-gray-400 mb-2"},"新USDT地址",-1)),t("div",lt,[b(w,{modelValue:s($),"onUpdate:modelValue":e[5]||(e[5]=l=>D($)?$.value=l:null),rules:s(Y),placeholder:"请输入新GDA地址"},{default:S(({validate:l})=>[t("button",{class:"w-full bg-primary text-dark py-2 my-2 rounded-button button-glow",onClick:v=>s(A)(l)}," 确认修改 ",8,at)]),_:1},8,["modelValue","rules"])])]),t("div",null,[e[30]||(e[30]=t("label",{class:"block text-sm text-gray-400 mb-2"},"当前商户地址",-1)),t("div",ot,[O(M(s(I)(s(y)))+" ",1),t("button",{class:"ml-2 text-gray-400 hover:text-primary",onClick:e[6]||(e[6]=l=>r(String(s(y))))},e[29]||(e[29]=[t("i",{class:"fas fa-copy"},null,-1)]))]),e[31]||(e[31]=t("label",{class:"block text-sm text-gray-400 mb-2"},"新商户地址",-1)),t("div",rt,[b(w,{modelValue:s(W),"onUpdate:modelValue":e[7]||(e[7]=l=>D(W)?W.value=l:null),rules:s(we),placeholder:"请输入新商户地址"},{default:S(({validate:l})=>[t("button",{class:"w-full bg-primary text-dark py-2 my-2 rounded-button button-glow",onClick:v=>s(h)(l)}," 确认修改 ",8,nt)]),_:1},8,["modelValue","rules"])])]),e[32]||(e[32]=t("div",null,[t("label",{class:"block text-sm text-gray-400 mb-2"},"通知设置"),t("div",{class:"space-y-2"},[t("input",{class:"input-field w-full px-3 py-2 rounded-button text-sm",placeholder:"请输入通知内容",type:"text"}),t("button",{class:"w-full bg-primary text-dark py-2 rounded-button button-glow"},"确认修改")])],-1))])]),t("div",ut,[e[43]||(e[43]=t("h2",{class:"text-lg text-primary mb-4"},"收益配置",-1)),t("div",dt,[t("div",null,[e[34]||(e[34]=t("label",{class:"block text-sm text-gray-400 mb-2"},"控制产量",-1)),b(w,{modelValue:E.value,"onUpdate:modelValue":e[8]||(e[8]=l=>E.value=l),rules:Se,placeholder:"请输入地址"},{default:S(({validate:l})=>[E.value?(L(),N("div",it,[t("button",{class:ae(["flex-1 bg-gray-500 text-dark py-2 rounded-button button-glow",[{"bg-green-500":F.value}]]),onClick:v=>ce(l,!0)},"停止 ",10,mt),t("button",{class:ae(["flex-1 bg-gray-500 text-dark py-2 rounded-button",[{"bg-green-500":!F.value}]]),onClick:v=>ce(l,!1)},"启用 ",10,pt)])):be("",!0)]),_:1},8,["modelValue","rules"])]),t("div",null,[t("label",ct,[e[35]||(e[35]=t("span",null,"GDA收益矿池",-1)),t("span",yt,M(s(le)(String(s(B)||0)))+"枚",1)]),e[41]||(e[41]=t("label",{class:"block text-sm text-gray-400 mb-2"},"提取GDA",-1)),t("div",gt,[b(w,{modelValue:P.value,"onUpdate:modelValue":e[9]||(e[9]=l=>P.value=l),rules:s(pe),type:"number",placeholder:"请输入提取数量"},{default:S(({validate:l})=>[t("button",{class:"w-full bg-primary text-dark mt-2 py-2 rounded-button button-glow",onClick:v=>Ve(l)},"确认修改",8,vt)]),_:1},8,["modelValue","rules"])]),t("div",bt,[e[36]||(e[36]=t("label",{class:"block text-sm text-gray-400 mb-2"},"转入GDA",-1)),b(w,{modelValue:s(se),"onUpdate:modelValue":e[10]||(e[10]=l=>D(se)?se.value=l:null),rules:s(pe),type:"number",placeholder:"请输入转入数量"},{default:S(({validate:l})=>[t("button",{class:"w-full bg-primary text-dark mt-2 py-2 rounded-button button-glow",onClick:v=>s(De)(l)},"确认修改",8,ft)]),_:1},8,["modelValue","rules"])]),e[42]||(e[42]=t("label",{class:"text-sm text-gray-400 mt-4 mb-2 flex justify-between items-center"},[t("span",null,"GDA释放设置")],-1)),b(ve,{onSuccess:s(Ae),class:"space-y-2"},{default:S(()=>[e[37]||(e[37]=t("label",{class:"block text-sm text-gray-400 mb-2"},"奖励倍数",-1)),b(w,{modelValue:s(_),"onUpdate:modelValue":e[11]||(e[11]=l=>D(_)?_.value=l:null),rules:s(Q).multiplier,placeholder:"请输入奖励倍数"},null,8,["modelValue","rules"]),e[38]||(e[38]=t("label",{class:"block text-sm text-gray-400 mb-2"},"释放比例",-1)),b(w,{modelValue:s(ee),"onUpdate:modelValue":e[12]||(e[12]=l=>D(ee)?ee.value=l:null),rules:s(Q).releaseRate,placeholder:"请输入释放比例"},null,8,["modelValue","rules"]),e[39]||(e[39]=t("label",{class:"block text-sm text-gray-400 mb-2"},"释放周期",-1)),b(w,{modelValue:s(te),"onUpdate:modelValue":e[13]||(e[13]=l=>D(te)?te.value=l:null),rules:s(Q).cycle,placeholder:"请输入释放周期(天)"},null,8,["modelValue","rules"]),e[40]||(e[40]=t("button",{class:"w-full bg-primary text-dark py-2 rounded-button button-glow"},"确认修改",-1))]),_:1,__:[37,38,39,40]},8,["onSuccess"])])])]),t("div",wt,[e[51]||(e[51]=t("h2",{class:"text-lg text-primary mb-4"},"预售设置",-1)),b(ve,{onSuccess:s(xe)},{default:S(({register:l})=>[t("div",xt,[t("div",null,[e[44]||(e[44]=t("label",{class:"block text-sm text-gray-400 mb-2"},"代币总量",-1)),b(w,G({ref_key:"totalTokensRef",ref:re,modelValue:s(z),"onUpdate:modelValue":e[14]||(e[14]=v=>D(z)?z.value=v:null),rules:s(C).totalTokens,placeholder:"请输入代币总量",type:"number"},l(re.value)),null,16,["modelValue","rules"])]),t("div",null,[e[45]||(e[45]=t("label",{class:"block text-sm text-gray-400 mb-2"},"单份价格",-1)),b(w,G({ref_key:"sharePriceRef",ref:ne,modelValue:s(H),"onUpdate:modelValue":e[15]||(e[15]=v=>D(H)?H.value=v:null),rules:s(C).sharePrice,placeholder:"请输入单份价格",type:"number"},l(ne.value)),null,16,["modelValue","rules"])]),t("div",null,[e[46]||(e[46]=t("label",{class:"block text-sm text-gray-400 mb-2"},"开始时间",-1)),b(w,G({ref_key:"startRef",ref:ue,modelValue:s(X),"onUpdate:modelValue":e[16]||(e[16]=v=>D(X)?X.value=v:null),rules:s(C).start,placeholder:"请输入开始时间",type:"datetime-local"},l(ue.value)),null,16,["modelValue","rules"])]),t("div",null,[e[47]||(e[47]=t("label",{class:"block text-sm text-gray-400 mb-2"},"结束时间",-1)),b(w,G({ref_key:"endRef",ref:de,modelValue:s(Z),"onUpdate:modelValue":e[17]||(e[17]=v=>D(Z)?Z.value=v:null),rules:s(C).end,placeholder:"请输入结束时间",type:"datetime-local"},l(de.value)),null,16,["modelValue","rules"])]),t("div",null,[e[48]||(e[48]=t("label",{class:"block text-sm text-gray-400 mb-2"},"每日限购",-1)),b(w,G({ref_key:"dailyLimitRef",ref:ie,modelValue:s(J),"onUpdate:modelValue":e[18]||(e[18]=v=>D(J)?J.value=v:null),rules:s(C).dailyLimit,placeholder:"请输入每日限购",type:"number"},l(ie.value)),null,16,["modelValue","rules"])]),t("div",null,[e[49]||(e[49]=t("label",{class:"block text-sm text-gray-400 mb-2"},"地址限购",-1)),b(w,G({ref_key:"addressLimitRef",ref:me,modelValue:s(K),"onUpdate:modelValue":e[19]||(e[19]=v=>D(K)?K.value=v:null),rules:s(C).addressLimit,placeholder:"请输入地址限购",type:"number"},l(me.value)),null,16,["modelValue","rules"])]),e[50]||(e[50]=t("button",{class:"col-span-2 bg-secondary text-white py-2 rounded-button button-glow mt-4"},"确认修改 ",-1))])]),_:1},8,["onSuccess"])])]),e[53]||(e[53]=Pe('<div class="glass-effect p-4 rounded-lg mt-6"><h2 class="text-lg text-primary mb-4">购买记录设置</h2><div class="space-y-4"><div><label class="block text-sm text-gray-400 mb-2">记录条数</label><input class="input-field w-full px-3 py-2 rounded-button text-sm" placeholder="请输入需要生成的记录条数" type="number"></div><button class="w-full bg-secondary text-white py-2 rounded-button button-glow mt-4">确认生成记录</button></div></div>',1))]))}});export{Vt as default};

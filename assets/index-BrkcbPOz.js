import{ae as A,a_ as dt,a$ as lt,b0 as fe,b1 as he,b2 as ft,b3 as ht,b4 as mt,b5 as ze,b6 as pt,b7 as Cs,b8 as As,b9 as ne,ba as We,bb as Rs,bc as gt,bd as yt,be as ks,bf as J,aZ as Bs,bg as ke,bh as U,aR as N,ad as bt,ag as Y,aJ as _t,ac as wt,bi as Et,bj as vt,aM as Q,bk as Be,bl as V,ak as xt,aI as b,aP as St,aK as Oe,bm as X,aV as pe,aS as je,bn as Tt,aU as B,bo as Pt,bp as W,ar as T,bq as It,br as Ct,bs as At,bt as Ls,bu as Ms,bv as Rt,bw as kt,Y as Bt,bx as Lt,aN as Mt,by as Le,bz as qt,bA as Ot,at as Z,as as ge,bB as qs,bC as jt,ah as H,aw as Nt,bD as Dt,bE as Ne,bF as Os,aO as Ht,ai as js,bG as Ns,bH as Ds,bI as Hs,bJ as Ut,bK as De,bL as Ft,bM as Gt,bN as Vt,bO as Us,aD as He,bP as Fs,bQ as Gs,bR as $t,bS as zt,bT as Wt,bU as Me,bV as Kt,bW as Jt,bX as Vs,bY as $s,bZ as zs,b_ as Ws,b$ as Ks,c0 as Js,c1 as Ys,c2 as Qs,c3 as Xs,c4 as Zs,c5 as ea,c6 as ta,c7 as sa,c8 as aa,c9 as na,ca as ra,cb as oa,cc as ia,cd as ca,ce as ua,cf as da,cg as la,ch as fa,ci as ha,cj as ma,ck as pa,cl as ga,cm as ya,cn as ba,aq as _a,ap as wa,ao as Ea,co as va,cp as xa,cq as Sa,cr as Ta,cs as Pa,ct as Ia,cu as Ca,cv as Aa,cw as Ra,cx as ka,cy as Ba,cz as La,cA as Ma,cB as qa,cC as Oa,cD as ja,cE as Na,cF as Da,cG as Ha,cH as Ua,cI as Fa,cJ as Ga,cK as Va,cL as $a,cM as za,cN as Wa,cO as Ka,cP as Ja,cQ as Ya,cR as Qa,cS as Xa,cT as Za,cU as en,cV as tn,cW as sn,cX as an,cY as nn,cZ as rn,c_ as on,c$ as cn,d0 as un,d1 as dn,d2 as ln,d3 as fn,d4 as hn,d5 as mn,d6 as pn,d7 as gn,d8 as yn,d9 as bn,da as _n,db as wn,dc as En,dd as vn,de as xn,df as Sn,dg as Tn,dh as Pn,di as In,dj as Cn,dk as An,dl as Rn,dm as kn,dn as Bn,dp as Ln,dq as Mn,dr as qn,ds as On,dt as jn,du as Nn,dv as Dn,dw as Hn,dx as Un,dy as Fn,dz as Gn,dA as Vn,dB as $n,dC as zn,dD as Wn,dE as Kn,dF as Jn,dG as Yn,dH as Qn,dI as Xn,dJ as Zn,dK as er,an as tr,dL as sr,dM as ar,dN as nr,aG as rr,dO as or,dP as ir,dQ as cr,dR as ur,dS as dr,af as lr,dT as fr,au as hr,dU as mr,aT as pr,dV as gr,dW as yr,dX as br,dY as _r,dZ as wr,B as Er,am as vr,ay as xr,d_ as Sr,az as Tr,d$ as Pr,e0 as Ir,e1 as Cr,e2 as Ar,e3 as Rr,e4 as kr,e5 as Ke,e6 as re,e7 as Je,e8 as Br,e9 as Lr,ea as Mr,aQ as qr,aH as Or,eb as jr,ec as Nr,ed as Dr,ee as Hr,ef as Ur,eg as Fr,eh as Gr,ei as Vr,ej as $r,ek as zr,el as Wr,em as Kr,en as Jr,eo as Yr,ep as Qr,eq as Xr,er as Zr,es as eo,et as to,eu as so,ev as ao,ew as no,ex as ro,ey as oo,ez as io,eA as co,eB as uo,eC as lo,eD as fo,eE as ho,eF as mo,eG as po,eH as go,eI as yo,eJ as bo,eK as _o,eL as wo,eM as Eo,eN as vo,eO as xo,eP as So,eQ as To,eR as Po,eS as Io,eT as Co,eU as Ao,eV as Ro,eW as ko,eX as Bo,eY as Lo,eZ as Mo,e_ as qo,e$ as Oo,f0 as jo,f1 as No,f2 as Do,f3 as Ho,f4 as Uo,f5 as Fo,f6 as Go,f7 as Vo,f8 as $o,f9 as zo,fa as Wo,fb as Ko,fc as Jo,fd as Yo,fe as Qo,ff as Xo,fg as Zo,fh as ei,fi as ti,fj as si,fk as ai,fl as ni,fm as ri,fn as oi,fo as ii,fp as ci,fq as ui,fr as di,fs as li,ft as fi,fu as hi,fv as mi,fw as pi,fx as gi,fy as yi,fz as bi,fA as _i,fB as wi,fC as Ei,fD as vi,fE as xi,fF as Si,fG as Ti,fH as Pi,fI as Ii,fJ as Ci,aj as Ai,fK as Ri,fL as ki,fM as Bi,fN as Li,fO as Mi,fP as qi,fQ as Oi,fR as ji,fS as Ni,aL as Di,aA as Hi,fT as Ui,fU as Ye,fV as Fi,fW as Gi,fX as Vi,fY as $i,fZ as zi,f_ as Wi,i as C,aW as Ki,h as Ji}from"./index--azQDwp6.js";import{d as Yi}from"./index-BNuwnxL8.js";import{i as Yt,p as Qt,d as Qi,f as Xi,w as Zi,h as ec,j as tc,E as sc,k as ac,l as nc,W as rc,c as oc,a as ic,e as cc,m as uc,b as Qe,n as dc,o as lc,q as fc,r as hc,t as mc,s as pc,u as Xe,z as gc,v as yc}from"./parseSignature-CG86p4Wf.js";import{a as Xt,h as Zt,g as es,v as ts,s as ss,I as bc,b as _c,c as wc,d as Ec,e as vc,f as xc,p as Sc,t as Tc}from"./hashMessage-COCbI78U.js";import{a as as,I as Pc,p as Ic}from"./parseEther-DqeQGYdn.js";import{d as Cc,e as Ac,a as Rc}from"./localBatchGatewayRequest-C6lOLw-f.js";import{s as ns}from"./secp256k1-BQdJroUY.js";import{ccipRequest as Ze,offchainLookup as kc,offchainLookupAbiItem as Bc,offchainLookupSignature as Lc}from"./ccip-CcgFLgj3.js";import{e as Mc}from"./events-CXH2uRM3.js";function qc(e,t){for(var s=0;s<t.length;s++){const a=t[s];if(typeof a!="string"&&!Array.isArray(a)){for(const n in a)if(n!=="default"&&!(n in e)){const r=Object.getOwnPropertyDescriptor(a,n);r&&Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:()=>a[n]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}async function Oc(e,{chain:t}){const{id:s,name:a,nativeCurrency:n,rpcUrls:r,blockExplorers:i}=t;await e.request({method:"wallet_addEthereumChain",params:[{chainId:A(s),chainName:a,nativeCurrency:n,rpcUrls:r.default.http,blockExplorerUrls:i?Object.values(i).map(({url:c})=>c):void 0}]},{dedupe:!0,retryCount:0})}function jc(e,t){const{abi:s,args:a,bytecode:n,...r}=t,i=dt({abi:s,args:a,bytecode:n});return lt(e,{...r,...r.authorizationList?{to:null}:{},data:i})}function Nc(e){let t;if(typeof e=="string")t=fe(e,{modifiers:he});else{const s=ft(e),a=e.length;for(let n=0;n<a;n++){const r=e[n];if(!ht(r)){t=fe(r,{modifiers:he,structs:s});break}}}if(!t)throw new mt({param:e});return t}function Dc(e){const t=[];if(typeof e=="string"){const s=ze(e),a=s.length;for(let n=0;n<a;n++)t.push(fe(s[n],{modifiers:he}))}else{const s=ft(e),a=e.length;for(let n=0;n<a;n++){const r=e[n];if(ht(r))continue;const i=ze(r),c=i.length;for(let o=0;o<c;o++)t.push(fe(i[o],{modifiers:he,structs:s}))}}if(t.length===0)throw new pt({params:e});return t}async function Hc(e){return e.request({method:`${e.mode}_dumpState`})}async function Uc(e,{address:t}){await e.request({method:`${e.mode}_impersonateAccount`,params:[t]})}async function Fc(e,{seconds:t}){return await e.request({method:"evm_increaseTime",params:[A(t)]})}async function Gc(e,{state:t}){await e.request({method:`${e.mode}_loadState`,params:[t]})}async function Vc(e,{blocks:t,interval:s}){e.mode==="ganache"?await e.request({method:"evm_mine",params:[{blocks:A(t)}]}):await e.request({method:`${e.mode}_mine`,params:[A(t),A(s||0)]})}const $c=Uint8Array.from([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),rs=Uint8Array.from(new Array(16).fill(0).map((e,t)=>t)),zc=rs.map(e=>(9*e+5)%16),os=(()=>{const s=[[rs],[zc]];for(let a=0;a<4;a++)for(let n of s)n.push(n[a].map(r=>$c[r]));return s})(),is=os[0],cs=os[1],us=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>Uint8Array.from(e)),Wc=is.map((e,t)=>e.map(s=>us[t][s])),Kc=cs.map((e,t)=>e.map(s=>us[t][s])),Jc=Uint32Array.from([0,1518500249,1859775393,2400959708,2840853838]),Yc=Uint32Array.from([1352829926,1548603684,1836072691,2053994217,0]);function et(e,t,s,a){return e===0?t^s^a:e===1?t&s|~t&a:e===2?(t|~s)^a:e===3?t&a|s&~a:t^(s|~a)}const oe=new Uint32Array(16);class Qc extends As{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:t,h1:s,h2:a,h3:n,h4:r}=this;return[t,s,a,n,r]}set(t,s,a,n,r){this.h0=t|0,this.h1=s|0,this.h2=a|0,this.h3=n|0,this.h4=r|0}process(t,s){for(let u=0;u<16;u++,s+=4)oe[u]=t.getUint32(s,!0);let a=this.h0|0,n=a,r=this.h1|0,i=r,c=this.h2|0,o=c,d=this.h3|0,f=d,m=this.h4|0,h=m;for(let u=0;u<5;u++){const p=4-u,l=Jc[u],g=Yc[u],_=is[u],y=cs[u],w=Wc[u],P=Kc[u];for(let E=0;E<16;E++){const v=ne(a+et(u,r,c,d)+oe[_[E]]+l,w[E])+m|0;a=m,m=d,d=ne(c,10)|0,c=r,r=v}for(let E=0;E<16;E++){const v=ne(n+et(p,i,o,f)+oe[y[E]]+g,P[E])+h|0;n=h,h=f,f=ne(o,10)|0,o=i,i=v}}this.set(this.h1+c+f|0,this.h2+d+h|0,this.h3+m+n|0,this.h4+a+i|0,this.h0+r+o|0)}roundClean(){We(oe)}destroy(){this.destroyed=!0,We(this.buffer),this.set(0,0,0,0,0)}}const Xc=Cs(()=>new Qc),Zc=Xc;function eu({chains:e,id:t}){return e.find(s=>s.id===t)}const Ie=new Map;async function tu(e){const{getSocket:t,keepAlive:s=!0,key:a="socket",reconnect:n=!0,url:r}=e,{interval:i=3e4}=typeof s=="object"?s:{},{attempts:c=5,delay:o=2e3}=typeof n=="object"?n:{},d=JSON.stringify({keepAlive:s,key:a,url:r,reconnect:n});let f=Ie.get(d);if(f)return f;let m=0;const{schedule:h}=Rs({id:d,fn:async()=>{const l=new Map,g=new Map;let _,y,w,P=!1;function E(){if(n&&m<c){if(P)return;P=!0,m++,y==null||y.close(),setTimeout(async()=>{await v().catch(console.error),P=!1},o)}else l.clear(),g.clear()}async function v(){const x=await t({onClose(){var S,k;for(const I of l.values())(S=I.onError)==null||S.call(I,new J({url:r}));for(const I of g.values())(k=I.onError)==null||k.call(I,new J({url:r}));E()},onError(S){var k,I;_=S;for(const R of l.values())(k=R.onError)==null||k.call(R,_);for(const R of g.values())(I=R.onError)==null||I.call(R,_);E()},onOpen(){_=void 0,m=0},onResponse(S){const k=S.method==="eth_subscription",I=k?S.params.subscription:S.id,R=k?g:l,M=R.get(I);M&&M.onResponse(S),k||R.delete(I)}});if(y=x,s&&(w&&clearInterval(w),w=setInterval(()=>{var S;return(S=y.ping)==null?void 0:S.call(y)},i)),n&&g.size>0){const S=g.entries();for(const[k,{onResponse:I,body:R,onError:M}]of S)R&&(g.delete(k),f==null||f.request({body:R,onResponse:I,onError:M}))}return x}return await v(),_=void 0,f={close(){w&&clearInterval(w),y.close(),Ie.delete(d)},get socket(){return y},request({body:x,onError:S,onResponse:k}){_&&S&&S(_);const I=x.id??ks.take(),R=M=>{var $e;typeof M.id=="number"&&I!==M.id||(x.method==="eth_subscribe"&&typeof M.result=="string"&&g.set(M.result,{onResponse:R,onError:S,body:x}),x.method==="eth_unsubscribe"&&g.delete(($e=x.params)==null?void 0:$e[0]),k(M))};l.set(I,{onResponse:R,onError:S});try{y.request({body:{jsonrpc:"2.0",id:I,...x}})}catch(M){S==null||S(M)}},requestAsync({body:x,timeout:S=1e4}){return gt(()=>new Promise((k,I)=>this.request({body:x,onError:I,onResponse:k})),{errorInstance:new yt({body:x,url:r}),timeout:S})},requests:l,subscriptions:g,url:r},Ie.set(d,f),[f]}}),[u,[p]]=await h();return p}async function le(e,t={}){const{keepAlive:s,reconnect:a}=t;return tu({async getSocket({onClose:n,onError:r,onOpen:i,onResponse:c}){const o=await Bs(()=>import("./native-CJ5et6AR.js"),[]).then(u=>u.WebSocket),d=new o(e);function f(){d.removeEventListener("close",f),d.removeEventListener("message",m),d.removeEventListener("error",r),d.removeEventListener("open",i),n()}function m({data:u}){try{const p=JSON.parse(u);c(p)}catch(p){r(p)}}d.addEventListener("close",f),d.addEventListener("message",m),d.addEventListener("error",r),d.addEventListener("open",i),d.readyState===o.CONNECTING&&await new Promise((u,p)=>{d&&(d.onopen=u,d.onerror=p)});const{close:h}=d;return Object.assign(d,{close(){h.bind(d)(),f()},ping(){try{if(d.readyState===d.CLOSED||d.readyState===d.CLOSING)throw new ke({url:d.url,cause:new J({url:d.url})});const u={jsonrpc:"2.0",method:"net_version",params:[]};d.send(JSON.stringify(u))}catch(u){r(u)}},request({body:u}){if(d.readyState===d.CLOSED||d.readyState===d.CLOSING)throw new ke({body:u,url:d.url,cause:new J({url:d.url})});return d.send(JSON.stringify(u))}})},keepAlive:s,reconnect:a,url:e})}async function su(e){const t=await le(e);return Object.assign(t.socket,{requests:t.requests,subscriptions:t.subscriptions})}function qe(e){return!e||typeof e!="object"||!("BYTES_PER_ELEMENT"in e)?!1:e.BYTES_PER_ELEMENT===1&&e.constructor.name==="Uint8Array"}function au(e){return e.opcode==="CREATE2"?ls(e):ds(e)}function ds(e){const t=U(N(e.from));let s=U(e.nonce);return s[0]===0&&(s=new Uint8Array([])),N(`0x${Y(Et([t,s],"bytes")).slice(26)}`)}function ls(e){const t=U(N(e.from)),s=bt(qe(e.salt)?e.salt:U(e.salt),{size:32}),a="bytecodeHash"in e?qe(e.bytecodeHash)?e.bytecodeHash:U(e.bytecodeHash):Y(e.bytecode,"bytes");return N(_t(Y(wt([U("0xff"),t,s,a])),12))}function Ue(e,t="hex"){const s=(()=>{if(typeof e=="string"){if(e.length>3&&e.length%2!==0)throw new vt(e);return Q(e)}return e})(),a=Be(s,{recursiveReadLimit:Number.POSITIVE_INFINITY});return fs(a,t)}function fs(e,t="hex"){if(e.bytes.length===0)return t==="hex"?V(e.bytes):e.bytes;const s=e.readByte();if(s<128&&e.decrementPosition(1),s<192){const n=tt(e,s,128),r=e.readBytes(n);return t==="hex"?V(r):r}const a=tt(e,s,192);return nu(e,a,t)}function tt(e,t,s){if(s===128&&t<128)return 1;if(t<=s+55)return t-s;if(t===s+55+1)return e.readUint8();if(t===s+55+2)return e.readUint16();if(t===s+55+3)return e.readUint24();if(t===s+55+4)return e.readUint32();throw new xt("Invalid RLP prefix")}function nu(e,t,s){const a=e.position,n=[];for(;e.position-a<t;)n.push(fs(e,s));return n}function hs(e){return b(e)&&St(e)===32}function ru(e,t){const s=t||"hex",a=Zc(b(e,{strict:!1})?U(e):e);return s==="bytes"?a:Oe(a)}async function ms({message:e,signature:t}){return X({hash:Xt(e),signature:t})}async function ps(e){const{domain:t,message:s,primaryType:a,signature:n,types:r}=e;return X({hash:Zt({domain:t,message:s,primaryType:a,types:r}),signature:n})}async function ou({address:e,hash:t,signature:s}){return pe(N(e),await X({hash:t,signature:s}))}async function iu({address:e,message:t,signature:s}){return pe(N(e),await ms({message:t,signature:s}))}async function cu(e){const{address:t,domain:s,message:a,primaryType:n,signature:r,types:i}=e;return pe(N(t),await ps({domain:s,message:a,primaryType:n,signature:r,types:i}))}function uu(e){if(!Yt(e))return{signature:e};const[t,s,a]=je([{type:"address"},{type:"bytes"},{type:"bytes"}],e);return{address:t,data:s,signature:a}}function gs(e){const t=Tt(e,0,1);if(t==="0x04")return"eip7702";if(t==="0x03")return"eip4844";if(t==="0x02")return"eip1559";if(t==="0x01")return"eip2930";if(t!=="0x"&&B(t)>=192)return"legacy";throw new Pt({serializedType:t})}function ys(e){const t=gs(e);return t==="eip1559"?fu(e):t==="eip2930"?hu(e):t==="eip4844"?lu(e):t==="eip7702"?du(e):mu(e)}function du(e){const t=ye(e),[s,a,n,r,i,c,o,d,f,m,h,u,p]=t;if(t.length!==10&&t.length!==13)throw new W({attributes:{chainId:s,nonce:a,maxPriorityFeePerGas:n,maxFeePerGas:r,gas:i,to:c,value:o,data:d,accessList:f,authorizationList:m,...t.length>9?{v:h,r:u,s:p}:{}},serializedTransaction:e,type:"eip7702"});const l={chainId:B(s),type:"eip7702"};return b(c)&&c!=="0x"&&(l.to=c),b(i)&&i!=="0x"&&(l.gas=T(i)),b(d)&&d!=="0x"&&(l.data=d),b(a)&&(l.nonce=a==="0x"?0:B(a)),b(o)&&o!=="0x"&&(l.value=T(o)),b(r)&&r!=="0x"&&(l.maxFeePerGas=T(r)),b(n)&&n!=="0x"&&(l.maxPriorityFeePerGas=T(n)),f.length!==0&&f!=="0x"&&(l.accessList=be(f)),m.length!==0&&m!=="0x"&&(l.authorizationList=pu(m)),Ms(l),{...t.length===13?ee(t):void 0,...l}}function lu(e){const t=ye(e),s=t.length===4,a=s?t[0]:t,n=s?t.slice(1):[],[r,i,c,o,d,f,m,h,u,p,l,g,_,y]=a,[w,P,E]=n;if(!(a.length===11||a.length===14))throw new W({attributes:{chainId:r,nonce:i,maxPriorityFeePerGas:c,maxFeePerGas:o,gas:d,to:f,value:m,data:h,accessList:u,...a.length>9?{v:g,r:_,s:y}:{}},serializedTransaction:e,type:"eip4844"});const v={blobVersionedHashes:l,chainId:B(r),type:"eip4844"};return b(f)&&f!=="0x"&&(v.to=f),b(d)&&d!=="0x"&&(v.gas=T(d)),b(h)&&h!=="0x"&&(v.data=h),b(i)&&(v.nonce=i==="0x"?0:B(i)),b(m)&&m!=="0x"&&(v.value=T(m)),b(p)&&p!=="0x"&&(v.maxFeePerBlobGas=T(p)),b(o)&&o!=="0x"&&(v.maxFeePerGas=T(o)),b(c)&&c!=="0x"&&(v.maxPriorityFeePerGas=T(c)),u.length!==0&&u!=="0x"&&(v.accessList=be(u)),w&&P&&E&&(v.sidecars=At({blobs:w,commitments:P,proofs:E})),Ls(v),{...a.length===14?ee(a):void 0,...v}}function fu(e){const t=ye(e),[s,a,n,r,i,c,o,d,f,m,h,u]=t;if(!(t.length===9||t.length===12))throw new W({attributes:{chainId:s,nonce:a,maxPriorityFeePerGas:n,maxFeePerGas:r,gas:i,to:c,value:o,data:d,accessList:f,...t.length>9?{v:m,r:h,s:u}:{}},serializedTransaction:e,type:"eip1559"});const p={chainId:B(s),type:"eip1559"};return b(c)&&c!=="0x"&&(p.to=c),b(i)&&i!=="0x"&&(p.gas=T(i)),b(d)&&d!=="0x"&&(p.data=d),b(a)&&(p.nonce=a==="0x"?0:B(a)),b(o)&&o!=="0x"&&(p.value=T(o)),b(r)&&r!=="0x"&&(p.maxFeePerGas=T(r)),b(n)&&n!=="0x"&&(p.maxPriorityFeePerGas=T(n)),f.length!==0&&f!=="0x"&&(p.accessList=be(f)),It(p),{...t.length===12?ee(t):void 0,...p}}function hu(e){const t=ye(e),[s,a,n,r,i,c,o,d,f,m,h]=t;if(!(t.length===8||t.length===11))throw new W({attributes:{chainId:s,nonce:a,gasPrice:n,gas:r,to:i,value:c,data:o,accessList:d,...t.length>8?{v:f,r:m,s:h}:{}},serializedTransaction:e,type:"eip2930"});const u={chainId:B(s),type:"eip2930"};return b(i)&&i!=="0x"&&(u.to=i),b(r)&&r!=="0x"&&(u.gas=T(r)),b(o)&&o!=="0x"&&(u.data=o),b(a)&&(u.nonce=a==="0x"?0:B(a)),b(c)&&c!=="0x"&&(u.value=T(c)),b(n)&&n!=="0x"&&(u.gasPrice=T(n)),d.length!==0&&d!=="0x"&&(u.accessList=be(d)),Ct(u),{...t.length===11?ee(t):void 0,...u}}function mu(e){const t=Ue(e,"hex"),[s,a,n,r,i,c,o,d,f]=t;if(!(t.length===6||t.length===9))throw new W({attributes:{nonce:s,gasPrice:a,gas:n,to:r,value:i,data:c,...t.length>6?{v:o,r:d,s:f}:{}},serializedTransaction:e,type:"legacy"});const m={type:"legacy"};if(b(r)&&r!=="0x"&&(m.to=r),b(n)&&n!=="0x"&&(m.gas=T(n)),b(c)&&c!=="0x"&&(m.data=c),b(s)&&(m.nonce=s==="0x"?0:B(s)),b(i)&&i!=="0x"&&(m.value=T(i)),b(a)&&a!=="0x"&&(m.gasPrice=T(a)),Rt(m),t.length===6)return m;const h=b(o)&&o!=="0x"?T(o):0n;if(f==="0x"&&d==="0x")return h>0&&(m.chainId=Number(h)),m;const u=h,p=Number((u-35n)/2n);if(p>0)m.chainId=p;else if(u!==27n&&u!==28n)throw new kt({v:u});return m.v=u,m.s=f,m.r=d,m.yParity=u%2n===0n?1:0,m}function ye(e){return Ue(`0x${e.slice(4)}`,"hex")}function be(e){const t=[];for(let s=0;s<e.length;s++){const[a,n]=e[s];if(!Bt(a,{strict:!1}))throw new Lt({address:a});t.push({address:a,storageKeys:n.map(r=>hs(r)?r:Mt(r))})}return t}function pu(e){const t=[];for(let s=0;s<e.length;s++){const[a,n,r,i,c,o]=e[s];t.push({address:n,chainId:B(a),nonce:B(r),...ee([i,c,o])})}return t}function ee(e){const t=e.slice(-3),s=t[0]==="0x"||T(t[0])===0n?27n:28n;return{r:Le(t[1],{size:32}),s:Le(t[2],{size:32}),v:s,yParity:s===27n?0:1}}function gu(e,t="wei"){return as(e,qt[t])}async function yu(e){var s;return((s=e.account)==null?void 0:s.type)==="local"?[e.account.address]:(await e.request({method:"eth_accounts"},{dedupe:!0})).map(a=>Ot(a))}async function bu(e){return await e.request({method:"wallet_getPermissions"},{dedupe:!0})}async function _u(e,t={}){const{account:s=e.account,chainId:a}=t,n=s?Z(s):void 0,r=a?[n==null?void 0:n.address,[A(a)]]:[n==null?void 0:n.address],i=await e.request({method:"wallet_getCapabilities",params:r}),c={};for(const[o,d]of Object.entries(i)){c[Number(o)]={};for(let[f,m]of Object.entries(d))f==="addSubAccount"&&(f="unstable_addSubAccount"),c[Number(o)][f]=m}return typeof a=="number"?c[a]:c}async function wu(e,t){const{id:s}=t;await e.request({method:"wallet_showCallsStatus",params:[s]})}async function Eu(e){return(await e.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(s=>N(s))}async function vu(e,t){return e.request({method:"wallet_requestPermissions",params:[t]},{retryCount:0})}async function xu(e,{hash:t}){await e.request({method:`${e.mode}_dropTransaction`,params:[t]})}async function Su(e){return e.mode==="ganache"?await e.request({method:"eth_mining"}):await e.request({method:`${e.mode}_getAutomine`})}async function Tu(e){return await e.request({method:"txpool_content"})}async function Pu(e){const{pending:t,queued:s}=await e.request({method:"txpool_status"});return{pending:B(t),queued:B(s)}}async function Iu(e){return await e.request({method:"txpool_inspect"})}async function Cu(e){await e.request({method:`${e.mode}_removeBlockTimestampInterval`})}async function Au(e,{blockNumber:t,jsonRpcUrl:s}={}){await e.request({method:`${e.mode}_reset`,params:[{forking:{blockNumber:Number(t),jsonRpcUrl:s}}]})}async function Ru(e,{id:t}){await e.request({method:"evm_revert",params:[t]})}async function ku(e,t){const{account:s=e.account}=t;if(!s)throw new ge({docsPath:"/docs/eip7702/signAuthorization"});const a=Z(s);if(!a.signAuthorization)throw new qs({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:a.type});const n=await Qt(e,t);return a.signAuthorization(n)}async function Bu(e,t){var d,f,m,h;const{account:s=e.account,chain:a=e.chain,...n}=t;if(!s)throw new ge({docsPath:"/docs/actions/wallet/signTransaction"});const r=Z(s);jt({account:r,...t});const i=await H(e,Nt,"getChainId")({});a!==null&&Dt({currentChainId:i,chain:a});const c=(a==null?void 0:a.formatters)||((d=e.chain)==null?void 0:d.formatters),o=((f=c==null?void 0:c.transactionRequest)==null?void 0:f.format)||Ne;return r.signTransaction?r.signTransaction({...n,chainId:i},{serializer:(h=(m=e.chain)==null?void 0:m.serializers)==null?void 0:h.transaction}):await e.request({method:"eth_signTransaction",params:[{...o(n),chainId:A(i),from:r.address}]},{retryCount:0})}async function Lu(e,t){var _,y,w;const{accessList:s,data:a,from:n,gas:r,gasPrice:i,maxFeePerGas:c,maxPriorityFeePerGas:o,nonce:d,to:f,value:m,...h}=t,u=(w=(y=(_=e.chain)==null?void 0:_.formatters)==null?void 0:y.transactionRequest)==null?void 0:w.format,l=(u||Ne)({...Os(h,{format:u}),accessList:s,data:a,from:n,gas:r,gasPrice:i,maxFeePerGas:c,maxPriorityFeePerGas:o,nonce:d,to:f,value:m});return await e.request({method:"eth_sendUnsignedTransaction",params:[l]})}async function Mu(e,{address:t,value:s}){e.mode==="ganache"?await e.request({method:"evm_setAccountBalance",params:[t,A(s)]}):await e.request({method:`${e.mode}_setBalance`,params:[t,A(s)]})}async function qu(e,t){e.mode==="ganache"?t?await e.request({method:"miner_start"}):await e.request({method:"miner_stop"}):await e.request({method:"evm_setAutomine",params:[t]})}async function Ou(e,{gasLimit:t}){await e.request({method:"evm_setBlockGasLimit",params:[A(t)]})}async function ju(e,{interval:t}){const s=e.mode==="hardhat"?t*1e3:t;await e.request({method:`${e.mode}_setBlockTimestampInterval`,params:[s]})}async function Nu(e,{address:t,bytecode:s}){e.mode==="ganache"?await e.request({method:"evm_setAccountCode",params:[t,s]}):await e.request({method:`${e.mode}_setCode`,params:[t,s]})}async function Du(e,{address:t}){await e.request({method:`${e.mode}_setCoinbase`,params:[t]})}async function Hu(e,{interval:t}){const s=e.mode==="hardhat"?t*1e3:t;await e.request({method:"evm_setIntervalMining",params:[s]})}async function Uu(e,t){await e.request({method:`${e.mode}_setLoggingEnabled`,params:[t]})}async function Fu(e,{gasPrice:t}){await e.request({method:`${e.mode}_setMinGasPrice`,params:[A(t)]})}async function Gu(e,{baseFeePerGas:t}){await e.request({method:`${e.mode}_setNextBlockBaseFeePerGas`,params:[A(t)]})}async function Vu(e,{timestamp:t}){await e.request({method:"evm_setNextBlockTimestamp",params:[A(t)]})}async function $u(e,{address:t,nonce:s}){await e.request({method:`${e.mode}_setNonce`,params:[t,A(s)]})}async function zu(e,t){await e.request({method:`${e.mode}_setRpcUrl`,params:[t]})}async function Wu(e,{address:t,index:s,value:a}){await e.request({method:`${e.mode}_setStorageAt`,params:[t,typeof s=="number"?A(s):s,a]})}async function Ku(e){return await e.request({method:"evm_snapshot"})}async function Ju(e,{account:t=e.account,message:s}){if(!t)throw new ge({docsPath:"/docs/actions/wallet/signMessage"});const a=Z(t);if(a.signMessage)return a.signMessage({message:s});const n=typeof s=="string"?Ht(s):s.raw instanceof Uint8Array?Oe(s.raw):s.raw;return e.request({method:"personal_sign",params:[n,a.address]},{retryCount:0})}async function Yu(e,t){const{account:s=e.account,domain:a,message:n,primaryType:r}=t;if(!s)throw new ge({docsPath:"/docs/actions/wallet/signTypedData"});const i=Z(s),c={EIP712Domain:es({domain:a}),...t.types};if(ts({domain:a,message:n,primaryType:r,types:c}),i.signTypedData)return i.signTypedData({domain:a,message:n,primaryType:r,types:c});const o=ss({domain:a,message:n,primaryType:r,types:c});return e.request({method:"eth_signTypedData_v4",params:[i.address,o]},{retryCount:0})}async function Qu(e,{address:t}){await e.request({method:`${e.mode}_stopImpersonatingAccount`,params:[t]})}async function Xu(e,{id:t}){await e.request({method:"wallet_switchEthereumChain",params:[{chainId:A(t)}]},{retryCount:0})}async function Zu(e,t){return await e.request({method:"wallet_watchAsset",params:t},{retryCount:0})}function ed({abi:e,address:t,client:s}){const a=s,[n,r]=a?"public"in a&&"wallet"in a?[a.public,a.wallet]:"public"in a?[a.public,void 0]:"wallet"in a?[void 0,a.wallet]:[a,a]:[void 0,void 0],i=n!=null,c=r!=null,o={};let d=!1,f=!1,m=!1;for(const h of e)if(h.type==="function"?h.stateMutability==="view"||h.stateMutability==="pure"?d=!0:f=!0:h.type==="event"&&(m=!0),d&&f&&m)break;return i&&(d&&(o.read=new Proxy({},{get(h,u){return(...p)=>{const{args:l,options:g}=ie(p);return H(n,js,"readContract")({abi:e,address:t,functionName:u,args:l,...g})}}})),f&&(o.simulate=new Proxy({},{get(h,u){return(...p)=>{const{args:l,options:g}=ie(p);return H(n,Qi,"simulateContract")({abi:e,address:t,functionName:u,args:l,...g})}}})),m&&(o.createEventFilter=new Proxy({},{get(h,u){return(...p)=>{const l=e.find(y=>y.type==="event"&&y.name===u),{args:g,options:_}=Ce(p,l);return H(n,Ns,"createContractEventFilter")({abi:e,address:t,eventName:u,args:g,..._})}}}),o.getEvents=new Proxy({},{get(h,u){return(...p)=>{const l=e.find(y=>y.type==="event"&&y.name===u),{args:g,options:_}=Ce(p,l);return H(n,Ds,"getContractEvents")({abi:e,address:t,eventName:u,args:g,..._})}}}),o.watchEvent=new Proxy({},{get(h,u){return(...p)=>{const l=e.find(y=>y.type==="event"&&y.name===u),{args:g,options:_}=Ce(p,l);return H(n,Hs,"watchContractEvent")({abi:e,address:t,eventName:u,args:g,..._})}}}))),c&&f&&(o.write=new Proxy({},{get(h,u){return(...p)=>{const{args:l,options:g}=ie(p);return H(r,Ut,"writeContract")({abi:e,address:t,functionName:u,args:l,...g})}}})),(i||c)&&f&&(o.estimateGas=new Proxy({},{get(h,u){return(...p)=>{const{args:l,options:g}=ie(p);return H(n??r,Xi,"estimateContractGas")({abi:e,address:t,functionName:u,args:l,...g,account:g.account??r.account})}}})),o.address=t,o.abi=e,o}function ie(e){const t=e.length&&Array.isArray(e[0]),s=t?e[0]:[],a=(t?e[1]:e[0])??{};return{args:s,options:a}}function Ce(e,t){let s=!1;Array.isArray(e[0])?s=!0:e.length===1?s=t.inputs.some(r=>r.indexed):e.length===2&&(s=!0);const a=s?e[0]:void 0,n=(s?e[1]:e[0])??{};return{args:a,options:n}}function td(e,t={}){const{key:s="fallback",name:a="Fallback",rank:n=!1,shouldThrow:r=bs,retryCount:i,retryDelay:c}=t;return({chain:o,pollingInterval:d=4e3,timeout:f,...m})=>{let h=e,u=()=>{};const p=De({key:s,name:a,async request({method:l,params:g}){let _;const y=async(w=0)=>{const P=h[w]({...m,chain:o,retryCount:0,timeout:f});try{const E=await P.request({method:l,params:g});return u({method:l,params:g,response:E,transport:P,status:"success"}),E}catch(E){if(u({error:E,method:l,params:g,transport:P,status:"error"}),r(E)||w===h.length-1||(_??(_=h.slice(w+1).some(v=>{const{include:x,exclude:S}=v({chain:o}).config.methods||{};return x?x.includes(l):S?!S.includes(l):!0})),!_))throw E;return y(w+1)}};return y()},retryCount:i,retryDelay:c,type:"fallback"},{onResponse:l=>u=l,transports:h.map(l=>l({chain:o,retryCount:0}))});if(n){const l=typeof n=="object"?n:{};sd({chain:o,interval:l.interval??d,onTransports:g=>h=g,ping:l.ping,sampleCount:l.sampleCount,timeout:l.timeout,transports:h,weights:l.weights})}return p}}function bs(e){return!!("code"in e&&typeof e.code=="number"&&(e.code===Ft.code||e.code===Gt.code||Vt.nodeMessage.test(e.message)||e.code===5e3))}function sd({chain:e,interval:t=4e3,onTransports:s,ping:a,sampleCount:n=10,timeout:r=1e3,transports:i,weights:c={}}){const{stability:o=.7,latency:d=.3}=c,f=[],m=async()=>{const h=await Promise.all(i.map(async l=>{const g=l({chain:e,retryCount:0,timeout:r}),_=Date.now();let y,w;try{await(a?a({transport:g}):g.request({method:"net_listening"})),w=1}catch{w=0}finally{y=Date.now()}return{latency:y-_,success:w}}));f.push(h),f.length>n&&f.shift();const u=Math.max(...f.map(l=>Math.max(...l.map(({latency:g})=>g)))),p=i.map((l,g)=>{const _=f.map(v=>v[g].latency),w=1-_.reduce((v,x)=>v+x,0)/_.length/u,P=f.map(v=>v[g].success),E=P.reduce((v,x)=>v+x,0)/P.length;return E===0?[0,g]:[d*w+o*E,g]}).sort((l,g)=>g[0]-l[0]);s(p.map(([,l])=>i[l])),await Us(t),m()};m()}function _s({mode:e}){return t=>{const s=t.extend(()=>({mode:e}));return{dropTransaction:a=>xu(s,a),dumpState:()=>Hc(s),getAutomine:()=>Su(s),getTxpoolContent:()=>Tu(s),getTxpoolStatus:()=>Pu(s),impersonateAccount:a=>Uc(s,a),increaseTime:a=>Fc(s,a),inspectTxpool:()=>Iu(s),loadState:a=>Gc(s,a),mine:a=>Vc(s,a),removeBlockTimestampInterval:()=>Cu(s),reset:a=>Au(s,a),revert:a=>Ru(s,a),sendUnsignedTransaction:a=>Lu(s,a),setAutomine:a=>qu(s,a),setBalance:a=>Mu(s,a),setBlockGasLimit:a=>Ou(s,a),setBlockTimestampInterval:a=>ju(s,a),setCode:a=>Nu(s,a),setCoinbase:a=>Du(s,a),setIntervalMining:a=>Hu(s,a),setLoggingEnabled:a=>Uu(s,a),setMinGasPrice:a=>Fu(s,a),setNextBlockBaseFeePerGas:a=>Gu(s,a),setNextBlockTimestamp:a=>Vu(s,a),setNonce:a=>$u(s,a),setRpcUrl:a=>zu(s,a),setStorageAt:a=>Wu(s,a),snapshot:()=>Ku(s),stopImpersonatingAccount:a=>Qu(s,a)}}}function ad(e){const{key:t="test",name:s="Test Client",mode:a}=e;return He({...e,key:t,name:s,type:"testClient"}).extend(r=>({mode:a,..._s({mode:a})(r)}))}function ws(e){return{addChain:t=>Oc(e,t),deployContract:t=>jc(e,t),getAddresses:()=>yu(e),getCallsStatus:t=>tc(e,t),getCapabilities:t=>_u(e,t),getChainId:()=>Nt(e),getPermissions:()=>bu(e),prepareAuthorization:t=>Qt(e,t),prepareTransactionRequest:t=>Gs(e,t),requestAddresses:()=>Eu(e),requestPermissions:t=>vu(e,t),sendCalls:t=>ec(e,t),sendRawTransaction:t=>Fs(e,t),sendTransaction:t=>lt(e,t),showCallsStatus:t=>wu(e,t),signAuthorization:t=>ku(e,t),signMessage:t=>Ju(e,t),signTransaction:t=>Bu(e,t),signTypedData:t=>Yu(e,t),switchChain:t=>Xu(e,t),waitForCallsStatus:t=>Zi(e,t),watchAsset:t=>Zu(e,t),writeContract:t=>Ut(e,t)}}function nd(e){const{key:t="wallet",name:s="Wallet Client",transport:a}=e;return He({...e,key:t,name:s,transport:a,type:"walletClient"}).extend(ws)}function rd(e,t={}){const{keepAlive:s,key:a="webSocket",methods:n,name:r="WebSocket JSON-RPC",reconnect:i,retryDelay:c}=t;return({chain:o,retryCount:d,timeout:f})=>{var l;const m=t.retryCount??d,h=f??t.timeout??1e4,u=e||((l=o==null?void 0:o.rpcUrls.default.webSocket)==null?void 0:l[0]),p={keepAlive:s,reconnect:i};if(!u)throw new $t;return De({key:a,methods:n,name:r,async request({method:g,params:_}){const y={method:g,params:_},w=await le(u,p),{error:P,result:E}=await w.requestAsync({body:y,timeout:h});if(P)throw new zt({body:y,error:P,url:u});return E},retryCount:m,retryDelay:c,timeout:h,type:"webSocket"},{getSocket(){return su(u)},getRpcClient(){return le(u,p)},async subscribe({params:g,onData:_,onError:y}){const w=await le(u,p),{result:P}=await new Promise((E,v)=>w.request({body:{method:"eth_subscribe",params:g},onError(x){v(x),y==null||y(x)},onResponse(x){if(x.error){v(x.error),y==null||y(x.error);return}if(typeof x.id=="number"){E(x);return}x.method==="eth_subscription"&&_(x.params)}}));return{subscriptionId:P,async unsubscribe(){return new Promise(E=>w.request({body:{method:"eth_unsubscribe",params:[P]},onResponse:E}))}}}})}}class od extends Error{constructor(t,s){super(s),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=t,this.details=s}}const Ae="/docs/contract/decodeDeployData";function id(e){const{abi:t,bytecode:s,data:a}=e;if(a===s)return{bytecode:s};const n=t.find(i=>"type"in i&&i.type==="constructor");if(!n)throw new Wt({docsPath:Ae});if(!("inputs"in n))throw new Me({docsPath:Ae});if(!n.inputs||n.inputs.length===0)throw new Me({docsPath:Ae});return{args:je(n.inputs,`0x${a.replace(s,"")}`),bytecode:s}}function cd({r:e,yParityAndS:t}){const s=Q(t),a=s[0]&128?1:0,n=s;return a===1&&(n[0]&=127),{r:e,s:V(n),yParity:a}}function st(e){const{r:t,s}=ns.Signature.fromCompact(e.slice(2,130));return{r:A(t,{size:32}),yParityAndS:A(s,{size:32})}}async function ud(e){const{serializedTransaction:t,signature:s}=e,a=ys(t),n=s??{r:a.r,s:a.s,v:a.v,yParity:a.yParity},r=Kt({...a,r:void 0,s:void 0,v:void 0,yParity:void 0,sidecars:void 0});return await X({hash:Y(r),signature:n})}function dd(e){const{r:t,s,v:a,yParity:n}=e,r=Number(n??a-27n);let i=s;if(r===1){const c=Q(s);c[0]|=128,i=V(c)}return{r:t,yParityAndS:i}}function at({r:e,yParityAndS:t}){return`0x${new ns.Signature(T(e),T(t)).toCompactHex()}`}function ld(e){const{sidecars:t,version:s}=e,a=e.to??(typeof t[0].blob=="string"?"hex":"bytes"),n=[];for(const{commitment:r}of t)n.push(Jt({commitment:r,to:a,version:s}));return n}function fd(e){const t=e.to??(typeof e.blobs[0]=="string"?"hex":"bytes"),s=typeof e.blobs[0]=="string"?e.blobs.map(c=>Q(c)):e.blobs,a=s.reduce((c,o)=>c+o.length,0),n=Be(new Uint8Array(a));let r=!0;for(const c of s){const o=Be(c);for(;r&&o.position<c.length;){o.incrementPosition(1);let d=31;c.length-o.position<31&&(d=c.length-o.position);for(const f in Array.from({length:d})){const m=o.readByte();if(m===128&&!o.inspectBytes(o.remaining).includes(128)){r=!1;break}n.pushByte(m)}}}const i=n.bytes.slice(0,n.position);return t==="hex"?V(i):i}function Es({blobToKzgCommitment:e,computeBlobKzgProof:t}){return{blobToKzgCommitment:e,computeBlobKzgProof:t}}function hd(e,t){try{e.loadTrustedSetup(t)}catch(s){const a=s;if(!a.message.includes("trusted setup is already loaded"))throw a}return Es(e)}const md=Object.freeze(Object.defineProperty({__proto__:null,AbiConstructorNotFoundError:Wt,AbiConstructorParamsNotFoundError:Me,AbiDecodingDataSizeInvalidError:Vs,AbiDecodingDataSizeTooSmallError:$s,AbiDecodingZeroDataError:zs,AbiEncodingArrayLengthMismatchError:Ws,AbiEncodingBytesSizeMismatchError:Ks,AbiEncodingLengthMismatchError:Js,AbiErrorInputsNotFoundError:Ys,AbiErrorNotFoundError:Qs,AbiErrorSignatureNotFoundError:Xs,AbiEventNotFoundError:Zs,AbiEventSignatureEmptyTopicsError:ea,AbiEventSignatureNotFoundError:ta,AbiFunctionNotFoundError:sa,AbiFunctionOutputsNotFoundError:aa,AbiFunctionSignatureNotFoundError:na,AccountStateConflictError:ra,AtomicReadyWalletRejectedUpgradeError:oa,AtomicityNotSupportedError:ia,BaseError:xt,BaseFeeScalarError:ca,BlockNotFoundError:ua,BundleTooLargeError:da,BytesSizeMismatchError:la,CallExecutionError:fa,ChainDisconnectedError:ha,ChainDoesNotSupportContract:ma,ChainMismatchError:pa,ChainNotFoundError:ga,CircularReferenceError:ya,ClientChainNotConfiguredError:ba,ContractFunctionExecutionError:_a,ContractFunctionRevertedError:wa,ContractFunctionZeroDataError:Ea,CounterfactualDeploymentFailedError:va,DecodeLogDataMismatch:xa,DecodeLogTopicsMismatch:Sa,DuplicateIdError:Ta,EIP1193ProviderRpcError:od,Eip1559FeesNotSupportedError:Pa,EnsAvatarInvalidNftUriError:sc,EnsAvatarUnsupportedNamespaceError:ac,EnsAvatarUriResolutionError:nc,EstimateGasExecutionError:Ia,ExecutionRevertedError:Vt,FeeCapTooHighError:Ca,FeeCapTooLowError:Aa,FeeConflictError:Ra,FilterTypeNotSupportedError:ka,HttpRequestError:Ba,InsufficientFundsError:La,IntegerOutOfRangeError:Ma,InternalRpcError:qa,IntrinsicGasTooHighError:Oa,IntrinsicGasTooLowError:ja,InvalidAbiDecodingTypeError:Na,InvalidAbiEncodingTypeError:Da,InvalidAbiItemError:Ha,InvalidAbiParameterError:mt,InvalidAbiParametersError:pt,InvalidAbiTypeParameterError:Ua,InvalidAddressError:Lt,InvalidArrayError:Fa,InvalidBytesBooleanError:Ga,InvalidChainIdError:Va,InvalidDecimalNumberError:Pc,InvalidDefinitionTypeError:$a,InvalidDomainError:bc,InvalidFunctionModifierError:za,InvalidHexBooleanError:Wa,InvalidHexValueError:vt,InvalidInputRpcError:Ka,InvalidLegacyVError:kt,InvalidModifierError:Ja,InvalidParameterError:Ya,InvalidParamsRpcError:Qa,InvalidParenthesisError:Xa,InvalidPrimaryTypeError:_c,InvalidRequestRpcError:Za,InvalidSerializableTransactionError:en,InvalidSerializedTransactionError:W,InvalidSerializedTransactionTypeError:Pt,InvalidSignatureError:tn,InvalidStorageKeySizeError:sn,InvalidStructSignatureError:an,InvalidStructTypeError:wc,JsonRpcVersionUnsupportedError:nn,LimitExceededRpcError:rn,MaxFeePerGasTooLowError:on,MethodNotFoundRpcError:cn,MethodNotSupportedRpcError:un,NonceMaxValueError:dn,NonceTooHighError:ln,NonceTooLowError:fn,ParseRpcError:hn,ProviderDisconnectedError:mn,ProviderRpcError:pn,RawContractError:gn,ResourceNotFoundRpcError:yn,ResourceUnavailableRpcError:bn,RpcError:_n,RpcRequestError:zt,SizeExceedsPaddingSizeError:wn,SizeOverflowError:En,SliceOffsetOutOfBoundsError:vn,SocketClosedError:J,SolidityProtectedKeywordError:xn,StateAssignmentConflictError:Sn,SwitchChainError:Tn,TimeoutError:yt,TipAboveFeeCapError:Pn,TransactionExecutionError:In,TransactionNotFoundError:Cn,TransactionReceiptNotFoundError:An,TransactionRejectedRpcError:Ft,TransactionTypeNotSupportedError:Rn,UnauthorizedProviderError:kn,UnknownBundleIdError:Bn,UnknownNodeError:Ln,UnknownRpcError:Mn,UnknownSignatureError:qn,UnknownTypeError:On,UnsupportedChainIdError:jn,UnsupportedNonOptionalCapabilityError:Nn,UnsupportedPackedAbiType:Dn,UnsupportedProviderMethodError:Hn,UrlRequiredError:$t,UserRejectedRequestError:Gt,WaitForCallsStatusTimeoutError:rc,WaitForTransactionReceiptTimeoutError:Un,WebSocketRequestError:ke,assertCurrentChain:Dt,assertRequest:jt,assertTransactionEIP1559:It,assertTransactionEIP2930:Ct,assertTransactionLegacy:Rt,blobsToCommitments:Fn,blobsToProofs:Gn,boolToBytes:Vn,boolToHex:$n,bytesToBigInt:zn,bytesToBool:Wn,bytesToHex:V,bytesToNumber:Kn,bytesToRlp:Jn,bytesToString:Yn,ccipFetch:Ze,ccipRequest:Ze,checksumAddress:Ot,commitmentToVersionedHash:Jt,commitmentsToVersionedHashes:Qn,compactSignatureToHex:at,compactSignatureToSignature:cd,concat:wt,concatBytes:Xn,concatHex:Zn,createClient:He,createNonceManager:oc,createPublicClient:ic,createTestClient:ad,createTransport:De,createWalletClient:nd,custom:er,decodeAbiParameters:je,decodeDeployData:id,decodeErrorResult:tr,decodeEventLog:sr,decodeFunctionData:Cc,decodeFunctionResult:ar,defineBlock:nr,defineChain:rr,defineKzg:Es,defineTransaction:or,defineTransactionReceipt:ir,defineTransactionRequest:cr,deploylessCallViaBytecodeBytecode:ur,deploylessCallViaFactoryBytecode:dr,domainSeparator:Ec,encodeAbiParameters:lr,encodeDeployData:dt,encodeErrorResult:Ac,encodeEventTopics:fr,encodeFunctionData:hr,encodeFunctionResult:Rc,encodePacked:cc,erc1155Abi:mr,erc20Abi:pr,erc20Abi_bytes32:gr,erc4626Abi:yr,erc721Abi:br,ethAddress:uc,etherUnits:_r,extractChain:eu,fallback:td,formatBlock:wr,formatEther:Er,formatGwei:vr,formatLog:xr,formatTransaction:Sr,formatTransactionReceipt:Tr,formatTransactionRequest:Ne,formatUnits:Pr,fromBlobs:fd,fromBytes:Ir,fromHex:Cr,fromRlp:Ue,getAbiItem:Ar,getAddress:N,getChainContractAddress:Rr,getContract:ed,getContractAddress:au,getContractError:kr,getCreate2Address:ls,getCreateAddress:ds,getEventSelector:Ke,getEventSignature:re,getFunctionSelector:Je,getFunctionSignature:re,getSerializedTransactionType:gs,getTransactionType:Br,getTypesForEIP712Domain:es,gweiUnits:qt,hashDomain:vc,hashMessage:Xt,hashStruct:xc,hashTypedData:Zt,hexToBigInt:T,hexToBool:Lr,hexToBytes:Q,hexToCompactSignature:st,hexToNumber:B,hexToRlp:Mr,hexToSignature:Qe,hexToString:qr,http:Or,isAddress:Bt,isAddressEqual:pe,isBytes:qe,isErc6492Signature:Yt,isHash:hs,isHex:b,keccak256:Y,labelhash:dc,maxInt104:jr,maxInt112:Nr,maxInt120:Dr,maxInt128:Hr,maxInt136:Ur,maxInt144:Fr,maxInt152:Gr,maxInt16:Vr,maxInt160:$r,maxInt168:zr,maxInt176:Wr,maxInt184:Kr,maxInt192:Jr,maxInt200:Yr,maxInt208:Qr,maxInt216:Xr,maxInt224:Zr,maxInt232:eo,maxInt24:to,maxInt240:so,maxInt248:ao,maxInt256:no,maxInt32:ro,maxInt40:oo,maxInt48:io,maxInt56:co,maxInt64:uo,maxInt72:lo,maxInt8:fo,maxInt80:ho,maxInt88:mo,maxInt96:po,maxUint104:go,maxUint112:yo,maxUint120:bo,maxUint128:_o,maxUint136:wo,maxUint144:Eo,maxUint152:vo,maxUint16:xo,maxUint160:So,maxUint168:To,maxUint176:Po,maxUint184:Io,maxUint192:Co,maxUint200:Ao,maxUint208:Ro,maxUint216:ko,maxUint224:Bo,maxUint232:Lo,maxUint24:Mo,maxUint240:qo,maxUint248:Oo,maxUint256:jo,maxUint32:No,maxUint40:Do,maxUint48:Ho,maxUint56:Uo,maxUint64:Fo,maxUint72:Go,maxUint8:Vo,maxUint80:$o,maxUint88:zo,maxUint96:Wo,minInt104:Ko,minInt112:Jo,minInt120:Yo,minInt128:Qo,minInt136:Xo,minInt144:Zo,minInt152:ei,minInt16:ti,minInt160:si,minInt168:ai,minInt176:ni,minInt184:ri,minInt192:oi,minInt200:ii,minInt208:ci,minInt216:ui,minInt224:di,minInt232:li,minInt24:fi,minInt240:hi,minInt248:mi,minInt256:pi,minInt32:gi,minInt40:yi,minInt48:bi,minInt56:_i,minInt64:wi,minInt72:Ei,minInt8:vi,minInt80:xi,minInt88:Si,minInt96:Ti,multicall3Abi:Pi,namehash:lc,nonceManager:fc,numberToBytes:Ii,numberToHex:A,offchainLookup:kc,offchainLookupAbiItem:Bc,offchainLookupSignature:Lc,pad:bt,padBytes:Ci,padHex:Le,parseAbi:Ai,parseAbiItem:hc,parseAbiParameter:Nc,parseAbiParameters:Dc,parseCompactSignature:st,parseErc6492Signature:uu,parseEther:Ic,parseEventLogs:Ri,parseGwei:gu,parseSignature:Qe,parseTransaction:ys,parseUnits:as,prepareEncodeFunctionData:ki,presignMessagePrefix:Sc,publicActions:mc,recoverAddress:X,recoverMessageAddress:ms,recoverPublicKey:Bi,recoverTransactionAddress:ud,recoverTypedDataAddress:ps,ripemd160:ru,rpcSchema:Li,rpcTransactionType:Mi,serializeAccessList:qi,serializeCompactSignature:at,serializeErc6492Signature:pc,serializeSignature:Xe,serializeTransaction:Kt,serializeTypedData:ss,setErrorConfig:Oi,setupKzg:hd,sha256:ji,shouldThrow:bs,sidecarsToVersionedHashes:ld,signatureToCompactSignature:dd,signatureToHex:Xe,size:St,slice:_t,sliceBytes:Ni,sliceHex:Tt,stringToBytes:Di,stringToHex:Ht,stringify:Hi,testActions:_s,toBlobSidecars:At,toBlobs:Ui,toBytes:U,toEventHash:Ye,toEventSelector:Ke,toEventSignature:re,toFunctionHash:Ye,toFunctionSelector:Je,toFunctionSignature:re,toHex:Oe,toPrefixedMessage:Tc,toRlp:Et,transactionType:Fi,trim:Mt,universalSignatureValidatorAbi:Gi,universalSignatureValidatorByteCode:Vi,validateTypedData:ts,verifyHash:ou,verifyMessage:iu,verifyTypedData:cu,walletActions:ws,webSocket:rd,weiUnits:$i,withCache:zi,withRetry:Wi,withTimeout:gt,zeroAddress:gc,zeroHash:yc},Symbol.toStringTag,{value:"Module"}));var Fe={},_e={},vs={},me={},xs={},te={},se={};Object.defineProperty(se,"__esModule",{value:!0});se.getSDKVersion=void 0;const pd=()=>"9.1.0";se.getSDKVersion=pd;var we={};Object.defineProperty(we,"__esModule",{value:!0});we.generateRequestId=void 0;const gd=e=>e.toString(16).padStart(2,"0"),yd=e=>{const t=new Uint8Array(e/2);return window.crypto.getRandomValues(t),Array.from(t,gd).join("")},bd=()=>typeof window<"u"?yd(10):new Date().getTime().toString(36);we.generateRequestId=bd;Object.defineProperty(te,"__esModule",{value:!0});te.MessageFormatter=void 0;const _d=se,wd=we;class Ee{}te.MessageFormatter=Ee;Ee.makeRequest=(e,t)=>({id:(0,wd.generateRequestId)(),method:e,params:t,env:{sdkVersion:(0,_d.getSDKVersion)()}});Ee.makeResponse=(e,t,s)=>({id:e,success:!0,version:s,data:t});Ee.makeErrorResponse=(e,t,s)=>({id:e,success:!1,error:t,version:s});var O={};Object.defineProperty(O,"__esModule",{value:!0});O.RestrictedMethods=O.Methods=void 0;var nt;(function(e){e.sendTransactions="sendTransactions",e.rpcCall="rpcCall",e.getChainInfo="getChainInfo",e.getSafeInfo="getSafeInfo",e.getTxBySafeTxHash="getTxBySafeTxHash",e.getSafeBalances="getSafeBalances",e.signMessage="signMessage",e.signTypedMessage="signTypedMessage",e.getEnvironmentInfo="getEnvironmentInfo",e.getOffChainSignature="getOffChainSignature",e.requestAddressBook="requestAddressBook",e.wallet_getPermissions="wallet_getPermissions",e.wallet_requestPermissions="wallet_requestPermissions"})(nt||(O.Methods=nt={}));var rt;(function(e){e.requestAddressBook="requestAddressBook"})(rt||(O.RestrictedMethods=rt={}));(function(e){var t=C&&C.__createBinding||(Object.create?function(r,i,c,o){o===void 0&&(o=c);var d=Object.getOwnPropertyDescriptor(i,c);(!d||("get"in d?!i.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return i[c]}}),Object.defineProperty(r,o,d)}:function(r,i,c,o){o===void 0&&(o=c),r[o]=i[c]}),s=C&&C.__exportStar||function(r,i){for(var c in r)c!=="default"&&!Object.prototype.hasOwnProperty.call(i,c)&&t(i,r,c)};Object.defineProperty(e,"__esModule",{value:!0});const a=te;class n{constructor(i=null,c=!1){this.allowedOrigins=null,this.callbacks=new Map,this.debugMode=!1,this.isServer=typeof window>"u",this.isValidMessage=({origin:o,data:d,source:f})=>{const m=!d,h=!this.isServer&&f===window.parent,u=typeof d.version<"u"&&parseInt(d.version.split(".")[0]),p=typeof u=="number"&&u>=1;let l=!0;return Array.isArray(this.allowedOrigins)&&(l=this.allowedOrigins.find(g=>g.test(o))!==void 0),!m&&h&&p&&l},this.logIncomingMessage=o=>{console.info(`Safe Apps SDK v1: A message was received from origin ${o.origin}. `,o.data)},this.onParentMessage=o=>{this.isValidMessage(o)&&(this.debugMode&&this.logIncomingMessage(o),this.handleIncomingMessage(o.data))},this.handleIncomingMessage=o=>{const{id:d}=o,f=this.callbacks.get(d);f&&(f(o),this.callbacks.delete(d))},this.send=(o,d)=>{const f=a.MessageFormatter.makeRequest(o,d);if(this.isServer)throw new Error("Window doesn't exist");return window.parent.postMessage(f,"*"),new Promise((m,h)=>{this.callbacks.set(f.id,u=>{if(!u.success){h(new Error(u.error));return}m(u)})})},this.allowedOrigins=i,this.debugMode=c,this.isServer||window.addEventListener("message",this.onParentMessage)}}e.default=n,s(O,e)})(xs);var ve={},xe={},Se={};Object.defineProperty(Se,"__esModule",{value:!0});Se.isObjectEIP712TypedData=void 0;const Ed=e=>typeof e=="object"&&e!=null&&"domain"in e&&"types"in e&&"message"in e;Se.isObjectEIP712TypedData=Ed;var Ss={};Object.defineProperty(Ss,"__esModule",{value:!0});var Ts={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TransferDirection=e.TransactionStatus=e.TokenType=e.Operation=void 0;var t=Yi;Object.defineProperty(e,"Operation",{enumerable:!0,get:function(){return t.Operation}}),Object.defineProperty(e,"TokenType",{enumerable:!0,get:function(){return t.TokenType}}),Object.defineProperty(e,"TransactionStatus",{enumerable:!0,get:function(){return t.TransactionStatus}}),Object.defineProperty(e,"TransferDirection",{enumerable:!0,get:function(){return t.TransferDirection}})})(Ts);var Ps={};Object.defineProperty(Ps,"__esModule",{value:!0});(function(e){var t=C&&C.__createBinding||(Object.create?function(a,n,r,i){i===void 0&&(i=r);var c=Object.getOwnPropertyDescriptor(n,r);(!c||("get"in c?!n.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(a,i,c)}:function(a,n,r,i){i===void 0&&(i=r),a[i]=n[r]}),s=C&&C.__exportStar||function(a,n){for(var r in a)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,a,r)};Object.defineProperty(e,"__esModule",{value:!0}),s(Se,e),s(Ss,e),s(Ts,e),s(Ps,e)})(xe);Object.defineProperty(ve,"__esModule",{value:!0});ve.TXs=void 0;const ce=O,vd=xe;class xd{constructor(t){this.communicator=t}async getBySafeTxHash(t){if(!t)throw new Error("Invalid safeTxHash");return(await this.communicator.send(ce.Methods.getTxBySafeTxHash,{safeTxHash:t})).data}async signMessage(t){const s={message:t};return(await this.communicator.send(ce.Methods.signMessage,s)).data}async signTypedMessage(t){if(!(0,vd.isObjectEIP712TypedData)(t))throw new Error("Invalid typed data");return(await this.communicator.send(ce.Methods.signTypedMessage,{typedData:t})).data}async send({txs:t,params:s}){if(!t||!t.length)throw new Error("No transactions were passed");const a={txs:t,params:s};return(await this.communicator.send(ce.Methods.sendTransactions,a)).data}}ve.TXs=xd;var Te={},K={};Object.defineProperty(K,"__esModule",{value:!0});K.RPC_CALLS=void 0;K.RPC_CALLS={eth_call:"eth_call",eth_gasPrice:"eth_gasPrice",eth_getLogs:"eth_getLogs",eth_getBalance:"eth_getBalance",eth_getCode:"eth_getCode",eth_getBlockByHash:"eth_getBlockByHash",eth_getBlockByNumber:"eth_getBlockByNumber",eth_getStorageAt:"eth_getStorageAt",eth_getTransactionByHash:"eth_getTransactionByHash",eth_getTransactionReceipt:"eth_getTransactionReceipt",eth_getTransactionCount:"eth_getTransactionCount",eth_estimateGas:"eth_estimateGas",safe_setSettings:"safe_setSettings"};Object.defineProperty(Te,"__esModule",{value:!0});Te.Eth=void 0;const L=K,Sd=O,j={defaultBlockParam:(e="latest")=>e,returnFullTxObjectParam:(e=!1)=>e,blockNumberToHex:e=>Number.isInteger(e)?`0x${e.toString(16)}`:e};class Td{constructor(t){this.communicator=t,this.call=this.buildRequest({call:L.RPC_CALLS.eth_call,formatters:[null,j.defaultBlockParam]}),this.getBalance=this.buildRequest({call:L.RPC_CALLS.eth_getBalance,formatters:[null,j.defaultBlockParam]}),this.getCode=this.buildRequest({call:L.RPC_CALLS.eth_getCode,formatters:[null,j.defaultBlockParam]}),this.getStorageAt=this.buildRequest({call:L.RPC_CALLS.eth_getStorageAt,formatters:[null,j.blockNumberToHex,j.defaultBlockParam]}),this.getPastLogs=this.buildRequest({call:L.RPC_CALLS.eth_getLogs}),this.getBlockByHash=this.buildRequest({call:L.RPC_CALLS.eth_getBlockByHash,formatters:[null,j.returnFullTxObjectParam]}),this.getBlockByNumber=this.buildRequest({call:L.RPC_CALLS.eth_getBlockByNumber,formatters:[j.blockNumberToHex,j.returnFullTxObjectParam]}),this.getTransactionByHash=this.buildRequest({call:L.RPC_CALLS.eth_getTransactionByHash}),this.getTransactionReceipt=this.buildRequest({call:L.RPC_CALLS.eth_getTransactionReceipt}),this.getTransactionCount=this.buildRequest({call:L.RPC_CALLS.eth_getTransactionCount,formatters:[null,j.defaultBlockParam]}),this.getGasPrice=this.buildRequest({call:L.RPC_CALLS.eth_gasPrice}),this.getEstimateGas=s=>this.buildRequest({call:L.RPC_CALLS.eth_estimateGas})([s]),this.setSafeSettings=this.buildRequest({call:L.RPC_CALLS.safe_setSettings})}buildRequest(t){const{call:s,formatters:a}=t;return async n=>{a&&Array.isArray(n)&&a.forEach((c,o)=>{c&&(n[o]=c(n[o]))});const r={call:s,params:n||[]};return(await this.communicator.send(Sd.Methods.rpcCall,r)).data}}}Te.Eth=Td;var Pe={};const Pd=Ki(md);var $={};Object.defineProperty($,"__esModule",{value:!0});$.MAGIC_VALUE_BYTES=$.MAGIC_VALUE=void 0;const Id="0x1626ba7e";$.MAGIC_VALUE=Id;const Cd="0x20c13b0b";$.MAGIC_VALUE_BYTES=Cd;var Ge={},ae={},F={};Object.defineProperty(F,"__esModule",{value:!0});F.PermissionsError=F.PERMISSIONS_REQUEST_REJECTED=void 0;F.PERMISSIONS_REQUEST_REJECTED=4001;class Ve extends Error{constructor(t,s,a){super(t),this.code=s,this.data=a,Object.setPrototypeOf(this,Ve.prototype)}}F.PermissionsError=Ve;Object.defineProperty(ae,"__esModule",{value:!0});ae.Wallet=void 0;const Re=O,ue=F;class Ad{constructor(t){this.communicator=t}async getPermissions(){return(await this.communicator.send(Re.Methods.wallet_getPermissions,void 0)).data}async requestPermissions(t){if(!this.isPermissionRequestValid(t))throw new ue.PermissionsError("Permissions request is invalid",ue.PERMISSIONS_REQUEST_REJECTED);try{return(await this.communicator.send(Re.Methods.wallet_requestPermissions,t)).data}catch{throw new ue.PermissionsError("Permissions rejected",ue.PERMISSIONS_REQUEST_REJECTED)}}isPermissionRequestValid(t){return t.every(s=>typeof s=="object"?Object.keys(s).every(a=>!!Object.values(Re.RestrictedMethods).includes(a)):!1)}}ae.Wallet=Ad;Object.defineProperty(Ge,"__esModule",{value:!0});const Rd=ae,ot=F,it=(e,t)=>t.some(s=>s.parentCapability===e),kd=()=>(e,t,s)=>{const a=s.value;return s.value=async function(){const n=new Rd.Wallet(this.communicator);let r=await n.getPermissions();if(it(t,r)||(r=await n.requestPermissions([{[t]:{}}])),!it(t,r))throw new ot.PermissionsError("Permissions rejected",ot.PERMISSIONS_REQUEST_REJECTED);return a.apply(this)},s};Ge.default=kd;var Bd=C&&C.__decorate||function(e,t,s,a){var n=arguments.length,r=n<3?t:a===null?a=Object.getOwnPropertyDescriptor(t,s):a,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(e,t,s,a);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(n<3?i(r):n>3?i(t,s,r):i(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r},Ld=C&&C.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Pe,"__esModule",{value:!0});Pe.Safe=void 0;const de=Pd,ct=$,D=O,ut=K,Md=xe,qd=Ld(Ge);class Is{constructor(t){this.communicator=t}async getChainInfo(){return(await this.communicator.send(D.Methods.getChainInfo,void 0)).data}async getInfo(){return(await this.communicator.send(D.Methods.getSafeInfo,void 0)).data}async experimental_getBalances({currency:t="usd"}={}){return(await this.communicator.send(D.Methods.getSafeBalances,{currency:t})).data}async check1271Signature(t,s="0x"){const a=await this.getInfo(),n=(0,de.encodeFunctionData)({abi:[{constant:!1,inputs:[{name:"_dataHash",type:"bytes32"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[t,s]}),r={call:ut.RPC_CALLS.eth_call,params:[{to:a.safeAddress,data:n},"latest"]};try{return(await this.communicator.send(D.Methods.rpcCall,r)).data.slice(0,10).toLowerCase()===ct.MAGIC_VALUE}catch{return!1}}async check1271SignatureBytes(t,s="0x"){const a=await this.getInfo(),n=(0,de.encodeFunctionData)({abi:[{constant:!1,inputs:[{name:"_data",type:"bytes"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[t,s]}),r={call:ut.RPC_CALLS.eth_call,params:[{to:a.safeAddress,data:n},"latest"]};try{return(await this.communicator.send(D.Methods.rpcCall,r)).data.slice(0,10).toLowerCase()===ct.MAGIC_VALUE_BYTES}catch{return!1}}calculateMessageHash(t){return(0,de.hashMessage)(t)}calculateTypedMessageHash(t){const s=typeof t.domain.chainId=="object"?t.domain.chainId.toNumber():Number(t.domain.chainId);let a=t.primaryType;if(!a){const n=Object.values(t.types),r=Object.keys(t.types).filter(i=>n.every(c=>c.every(({type:o})=>o.replace("[","").replace("]","")!==i)));if(r.length===0||r.length>1)throw new Error("Please specify primaryType");a=r[0]}return(0,de.hashTypedData)({message:t.message,domain:{...t.domain,chainId:s,verifyingContract:t.domain.verifyingContract,salt:t.domain.salt},types:t.types,primaryType:a})}async getOffChainSignature(t){return(await this.communicator.send(D.Methods.getOffChainSignature,t)).data}async isMessageSigned(t,s="0x"){let a;if(typeof t=="string"&&(a=async()=>{const n=this.calculateMessageHash(t);return await this.isMessageHashSigned(n,s)}),(0,Md.isObjectEIP712TypedData)(t)&&(a=async()=>{const n=this.calculateTypedMessageHash(t);return await this.isMessageHashSigned(n,s)}),a)return await a();throw new Error("Invalid message type")}async isMessageHashSigned(t,s="0x"){const a=[this.check1271Signature.bind(this),this.check1271SignatureBytes.bind(this)];for(const n of a)if(await n(t,s))return!0;return!1}async getEnvironmentInfo(){return(await this.communicator.send(D.Methods.getEnvironmentInfo,void 0)).data}async requestAddressBook(){return(await this.communicator.send(D.Methods.requestAddressBook,void 0)).data}}Pe.Safe=Is;Bd([(0,qd.default)()],Is.prototype,"requestAddressBook",null);var Od=C&&C.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(me,"__esModule",{value:!0});const jd=Od(xs),Nd=ve,Dd=Te,Hd=Pe,Ud=ae;class Fd{constructor(t={}){const{allowedDomains:s=null,debug:a=!1}=t;this.communicator=new jd.default(s,a),this.eth=new Dd.Eth(this.communicator),this.txs=new Nd.TXs(this.communicator),this.safe=new Hd.Safe(this.communicator),this.wallet=new Ud.Wallet(this.communicator)}}me.default=Fd;(function(e){var t=C&&C.__createBinding||(Object.create?function(i,c,o,d){d===void 0&&(d=o);var f=Object.getOwnPropertyDescriptor(c,o);(!f||("get"in f?!c.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return c[o]}}),Object.defineProperty(i,d,f)}:function(i,c,o,d){d===void 0&&(d=o),i[d]=c[o]}),s=C&&C.__exportStar||function(i,c){for(var o in i)o!=="default"&&!Object.prototype.hasOwnProperty.call(c,o)&&t(c,i,o)},a=C&&C.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(e,"__esModule",{value:!0}),e.getSDKVersion=void 0;const n=a(me);e.default=n.default,s(me,e),s(xe,e),s(O,e),s(te,e);var r=se;Object.defineProperty(e,"getSDKVersion",{enumerable:!0,get:function(){return r.getSDKVersion}}),s(K,e)})(vs);var z={};Object.defineProperty(z,"__esModule",{value:!0});z.numberToHex=z.getLowerCase=void 0;function Gd(e){return e&&e.toLowerCase()}z.getLowerCase=Gd;function Vd(e){return`0x${e.toString(16)}`}z.numberToHex=Vd;Object.defineProperty(_e,"__esModule",{value:!0});_e.SafeAppProvider=void 0;const G=vs,$d=Mc,q=z;class zd extends $d.EventEmitter{constructor(t,s){super(),this.submittedTxs=new Map,this.safe=t,this.sdk=s}async connect(){this.emit("connect",{chainId:this.chainId})}async disconnect(){}get chainId(){return this.safe.chainId}async request(t){var n,r,i,c;const{method:s,params:a=[]}=t;switch(s){case"eth_accounts":return[this.safe.safeAddress];case"net_version":case"eth_chainId":return(0,q.numberToHex)(this.chainId);case"personal_sign":{const[h,u]=a;if(this.safe.safeAddress.toLowerCase()!==u.toLowerCase())throw new Error("The address or message hash is invalid");const p=await this.sdk.txs.signMessage(h);return("signature"in p?p.signature:void 0)||"0x"}case"eth_sign":{const[h,u]=a;if(this.safe.safeAddress.toLowerCase()!==h.toLowerCase()||!u.startsWith("0x"))throw new Error("The address or message hash is invalid");const p=await this.sdk.txs.signMessage(u);return("signature"in p?p.signature:void 0)||"0x"}case"eth_signTypedData":case"eth_signTypedData_v4":{const[h,u]=a,p=typeof u=="string"?JSON.parse(u):u;if(this.safe.safeAddress.toLowerCase()!==h.toLowerCase())throw new Error("The address is invalid");const l=await this.sdk.txs.signTypedMessage(p);return("signature"in l?l.signature:void 0)||"0x"}case"eth_sendTransaction":const o={...a[0],value:a[0].value||"0",data:a[0].data||"0x"};typeof o.gas=="string"&&o.gas.startsWith("0x")&&(o.gas=parseInt(o.gas,16));const d=await this.sdk.txs.send({txs:[o],params:{safeTxGas:o.gas}});return this.submittedTxs.set(d.safeTxHash,{from:this.safe.safeAddress,hash:d.safeTxHash,gas:0,gasPrice:"0x00",nonce:0,input:o.data,value:o.value,to:o.to,blockHash:null,blockNumber:null,transactionIndex:null}),d.safeTxHash;case"eth_blockNumber":return(await this.sdk.eth.getBlockByNumber(["latest"])).number;case"eth_getBalance":return this.sdk.eth.getBalance([(0,q.getLowerCase)(a[0]),a[1]]);case"eth_getCode":return this.sdk.eth.getCode([(0,q.getLowerCase)(a[0]),a[1]]);case"eth_getTransactionCount":return this.sdk.eth.getTransactionCount([(0,q.getLowerCase)(a[0]),a[1]]);case"eth_getStorageAt":return this.sdk.eth.getStorageAt([(0,q.getLowerCase)(a[0]),a[1],a[2]]);case"eth_getBlockByNumber":return this.sdk.eth.getBlockByNumber([a[0],a[1]]);case"eth_getBlockByHash":return this.sdk.eth.getBlockByHash([a[0],a[1]]);case"eth_getTransactionByHash":let m=a[0];try{m=(await this.sdk.txs.getBySafeTxHash(m)).txHash||m}catch{}return this.submittedTxs.has(m)?this.submittedTxs.get(m):this.sdk.eth.getTransactionByHash([m]).then(h=>(h&&(h.hash=a[0]),h));case"eth_getTransactionReceipt":{let h=a[0];try{h=(await this.sdk.txs.getBySafeTxHash(h)).txHash||h}catch{}return this.sdk.eth.getTransactionReceipt([h]).then(u=>(u&&(u.transactionHash=a[0]),u))}case"eth_estimateGas":return this.sdk.eth.getEstimateGas(a[0]);case"eth_call":return this.sdk.eth.call([a[0],a[1]]);case"eth_getLogs":return this.sdk.eth.getPastLogs([a[0]]);case"eth_gasPrice":return this.sdk.eth.getGasPrice();case"wallet_getPermissions":return this.sdk.wallet.getPermissions();case"wallet_requestPermissions":return this.sdk.wallet.requestPermissions(a[0]);case"safe_setSettings":return this.sdk.eth.setSafeSettings([a[0]]);case"wallet_sendCalls":{const{from:h,calls:u,chainId:p}=a[0];if(p!==(0,q.numberToHex)(this.chainId))throw new Error(`Safe is not on chain ${p}`);if(h!==this.safe.safeAddress)throw Error("Invalid from address");const l=u.map((y,w)=>{if(!y.to)throw new Error(`Invalid call #${w}: missing "to" field`);return{to:y.to,data:y.data??"0x",value:y.value??(0,q.numberToHex)(0)}}),{safeTxHash:g}=await this.sdk.txs.send({txs:l});return{id:g}}case"wallet_getCallsStatus":{const h=a[0],u={[G.TransactionStatus.AWAITING_CONFIRMATIONS]:100,[G.TransactionStatus.AWAITING_EXECUTION]:100,[G.TransactionStatus.SUCCESS]:200,[G.TransactionStatus.CANCELLED]:400,[G.TransactionStatus.FAILED]:500},p=await this.sdk.txs.getBySafeTxHash(h),l={version:"1.0",id:h,chainId:(0,q.numberToHex)(this.chainId),status:u[p.txStatus]};if(!p.txHash)return l;const g=await this.sdk.eth.getTransactionReceipt([p.txHash]);if(!g)return l;const _=((r=(n=p.txData)==null?void 0:n.dataDecoded)==null?void 0:r.method)!=="multiSend"?1:((c=(i=p.txData.dataDecoded.parameters)==null?void 0:i[0].valueDecoded)==null?void 0:c.length)??1,y=Number(g.blockNumber),w=Number(g.gasUsed);return l.receipts=Array(_).fill({logs:g.logs,status:(0,q.numberToHex)(p.txStatus===G.TransactionStatus.SUCCESS?1:0),blockHash:g.blockHash,blockNumber:(0,q.numberToHex)(y),gasUsed:(0,q.numberToHex)(w),transactionHash:p.txHash}),l}case"wallet_showCallsStatus":throw new Error(`"${t.method}" not supported`);case"wallet_getCapabilities":return{[(0,q.numberToHex)(this.chainId)]:{atomicBatch:{supported:!0}}};default:throw Error(`"${t.method}" not implemented`)}}send(t,s){t||s("Undefined request"),this.request(t).then(a=>s(null,{jsonrpc:"2.0",id:t.id,result:a})).catch(a=>s(a,null))}}_e.SafeAppProvider=zd;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SafeAppProvider=void 0;var t=_e;Object.defineProperty(e,"SafeAppProvider",{enumerable:!0,get:function(){return t.SafeAppProvider}})})(Fe);const Wd=Ji(Fe),al=qc({__proto__:null,default:Wd},[Fe]);export{al as i};
